{
  "name": "alloc::vec::Vec::<T, A>::push_within_capacity",
  "span": "$library/alloc/src/vec/mod.rs:2567:5: 2567:74",
  "doc": " Appends an element and returns a reference to it if there is sufficient spare capacity,\n otherwise an error is returned with the element.\n\n Unlike [`push`] this method will not reallocate when there's insufficient capacity.\n The caller should use [`reserve`] or [`try_reserve`] to ensure that there is enough capacity.\n\n [`push`]: Vec::push\n [`reserve`]: Vec::reserve\n [`try_reserve`]: Vec::try_reserve\n\n # Examples\n\n A manual, panic-free alternative to [`FromIterator`]:\n\n ```\n #![feature(vec_push_within_capacity)]\n\n use std::collections::TryReserveError;\n fn from_iter_fallible<T>(iter: impl Iterator<Item=T>) -> Result<Vec<T>, TryReserveError> {\n     let mut vec = Vec::new();\n     for value in iter {\n         if let Err(value) = vec.push_within_capacity(value) {\n             vec.try_reserve(1)?;\n             // this cannot fail, the previous line either returned or added at least 1 free slot\n             let _ = vec.push_within_capacity(value);\n         }\n     }\n     Ok(vec)\n }\n assert_eq!(from_iter_fallible(0..100), Ok(Vec::from_iter(0..100)));\n ```\n\n # Time complexity\n\n Takes *O*(1) time.\n"
}