{
  "name": "alloc::collections::btree::split::<impl collections::btree::node::NodeRef<collections::btree::node::marker::Owned, K, V, collections::btree::node::marker::LeafOrInternal>>::split_off",
  "span": "$library/alloc/src/collections/btree/split.rs:34:5: 40:22",
  "src": "pub(super) fn split_off<Q: ?Sized + Ord, A: Allocator + Clone>(\n        &mut self,\n        key: &Q,\n        alloc: A,\n    ) -> Self\n    where\n        K: Borrow<Q>,\n    {\n        let left_root = self;\n        let mut right_root = Root::new_pillar(left_root.height(), alloc.clone());\n        let mut left_node = left_root.borrow_mut();\n        let mut right_node = right_root.borrow_mut();\n\n        loop {\n            let mut split_edge = match left_node.search_node(key) {\n                // key is going to the right tree\n                Found(kv) => kv.left_edge(),\n                GoDown(edge) => edge,\n            };\n\n            split_edge.move_suffix(&mut right_node);\n\n            match (split_edge.force(), right_node.force()) {\n                (Internal(edge), Internal(node)) => {\n                    left_node = edge.descend();\n                    right_node = node.first_edge().descend();\n                }\n                (Leaf(_), Leaf(_)) => break,\n                _ => unreachable!(),\n            }\n        }\n\n        left_root.fix_right_border(alloc.clone());\n        right_root.fix_left_border(alloc);\n        right_root\n    }"
}