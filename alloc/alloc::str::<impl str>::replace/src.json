{
  "name": "alloc::str::<impl str>::replace",
  "span": "$library/alloc/src/str.rs:268:5: 268:67",
  "src": "pub fn replace<P: Pattern>(&self, from: P, to: &str) -> String {\n        // Fast path for replacing a single ASCII character with another.\n        if let Some(from_byte) = match from.as_utf8_pattern() {\n            Some(Utf8Pattern::StringPattern([from_byte])) => Some(*from_byte),\n            Some(Utf8Pattern::CharPattern(c)) => c.as_ascii().map(|ascii_char| ascii_char.to_u8()),\n            _ => None,\n        } {\n            if let [to_byte] = to.as_bytes() {\n                return unsafe { replace_ascii(self.as_bytes(), from_byte, *to_byte) };\n            }\n        }\n        // Set result capacity to self.len() when from.len() <= to.len()\n        let default_capacity = match from.as_utf8_pattern() {\n            Some(Utf8Pattern::StringPattern(s)) if s.len() <= to.len() => self.len(),\n            Some(Utf8Pattern::CharPattern(c)) if c.len_utf8() <= to.len() => self.len(),\n            _ => 0,\n        };\n        let mut result = String::with_capacity(default_capacity);\n        let mut last_end = 0;\n        for (start, part) in self.match_indices(from) {\n            result.push_str(unsafe { self.get_unchecked(last_end..start) });\n            result.push_str(to);\n            last_end = start + part.len();\n        }\n        result.push_str(unsafe { self.get_unchecked(last_end..self.len()) });\n        result\n    }"
}