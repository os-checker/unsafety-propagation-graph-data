{
  "name": "collections::vec_deque::VecDeque::<T, A>::resize_with",
  "safe": true,
  "callees": {
    "core::iter::repeat_with": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Creates a new iterator that repeats elements of type `A` endlessly by\n applying the provided closure, the repeater, `F: FnMut() -> A`.\n\n The `repeat_with()` function calls the repeater over and over again.\n\n Infinite iterators like `repeat_with()` are often used with adapters like\n [`Iterator::take()`], in order to make them finite.\n\n If the element type of the iterator you need implements [`Clone`], and\n it is OK to keep the source element in memory, you should instead use\n the [`repeat()`] function.\n\n An iterator produced by `repeat_with()` is not a [`DoubleEndedIterator`].\n If you need `repeat_with()` to return a [`DoubleEndedIterator`],\n please open a GitHub issue explaining your use case.\n\n [`repeat()`]: crate::iter::repeat\n\n # Examples\n\n Basic usage:\n\n ```\n use std::iter;\n\n // let's assume we have some value of a type that is not `Clone`\n // or which we don't want to have in memory just yet because it is expensive:\n #[derive(PartialEq, Debug)]\n struct Expensive;\n\n // a particular value forever:\n let mut things = iter::repeat_with(|| Expensive);\n\n assert_eq!(Some(Expensive), things.next());\n assert_eq!(Some(Expensive), things.next());\n assert_eq!(Some(Expensive), things.next());\n assert_eq!(Some(Expensive), things.next());\n assert_eq!(Some(Expensive), things.next());\n ```\n\n Using mutation and going finite:\n\n ```rust\n use std::iter;\n\n // From the zeroth to the third power of two:\n let mut curr = 1;\n let mut pow2 = iter::repeat_with(|| { let tmp = curr; curr *= 2; tmp })\n                     .take(4);\n\n assert_eq!(Some(1), pow2.next());\n assert_eq!(Some(2), pow2.next());\n assert_eq!(Some(4), pow2.next());\n assert_eq!(Some(8), pow2.next());\n\n // ... and now we're done\n assert_eq!(None, pow2.next());\n ```\n",
      "adt": {}
    },
    "core::iter::Iterator::take": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Creates an iterator that yields the first `n` elements, or fewer\n if the underlying iterator ends sooner.\n\n `take(n)` yields elements until `n` elements are yielded or the end of\n the iterator is reached (whichever happens first).\n The returned iterator is a prefix of length `n` if the original iterator\n contains at least `n` elements, otherwise it contains all of the\n (fewer than `n`) elements of the original iterator.\n\n # Examples\n\n Basic usage:\n\n ```\n let a = [1, 2, 3];\n\n let mut iter = a.into_iter().take(2);\n\n assert_eq!(iter.next(), Some(1));\n assert_eq!(iter.next(), Some(2));\n assert_eq!(iter.next(), None);\n ```\n\n `take()` is often used with an infinite iterator, to make it finite:\n\n ```\n let mut iter = (0..).take(3);\n\n assert_eq!(iter.next(), Some(0));\n assert_eq!(iter.next(), Some(1));\n assert_eq!(iter.next(), Some(2));\n assert_eq!(iter.next(), None);\n ```\n\n If less than `n` elements are available,\n `take` will limit itself to the size of the underlying iterator:\n\n ```\n let v = [1, 2];\n let mut iter = v.into_iter().take(5);\n assert_eq!(iter.next(), Some(1));\n assert_eq!(iter.next(), Some(2));\n assert_eq!(iter.next(), None);\n ```\n\n Use [`by_ref`] to take from the iterator without consuming it, and then\n continue using the original iterator:\n\n ```\n let mut words = [\"hello\", \"world\", \"of\", \"Rust\"].into_iter();\n\n // Take the first two words.\n let hello_world: Vec<_> = words.by_ref().take(2).collect();\n assert_eq!(hello_world, vec![\"hello\", \"world\"]);\n\n // Collect the rest of the words.\n // We can only do this because we used `by_ref` earlier.\n let of_rust: Vec<_> = words.collect();\n assert_eq!(of_rust, vec![\"of\", \"Rust\"]);\n ```\n\n [`by_ref`]: Iterator::by_ref\n",
      "adt": {}
    },
    "core::iter::Extend::extend": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Extends a collection with the contents of an iterator.\n\n As this is the only required method for this trait, the [trait-level] docs\n contain more details.\n\n [trait-level]: Extend\n\n # Examples\n\n ```\n // You can extend a String with some chars:\n let mut message = String::from(\"abc\");\n\n message.extend(['d', 'e', 'f'].iter());\n\n assert_eq!(\"abcdef\", &message);\n ```\n",
      "adt": {}
    },
    "collections::vec_deque::VecDeque::<T, A>::truncate": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Shortens the deque, keeping the first `len` elements and dropping\n the rest.\n\n If `len` is greater or equal to the deque's current length, this has\n no effect.\n\n # Examples\n\n ```\n use std::collections::VecDeque;\n\n let mut buf = VecDeque::new();\n buf.push_back(5);\n buf.push_back(10);\n buf.push_back(15);\n assert_eq!(buf, [5, 10, 15]);\n buf.truncate(1);\n assert_eq!(buf, [5]);\n ```\n",
      "adt": {
        "collections::vec_deque::VecDeque": "MutableAsArgument"
      }
    }
  },
  "adts": {
    "collections::vec_deque::VecDeque": [
      "DerefVariantField(VariantIdx(None)-FieldIdx(Some(1)))",
      "MutRef"
    ],
    "core::iter::RepeatWith": [
      "Plain"
    ],
    "core::iter::Take": [
      "Plain"
    ]
  },
  "path": {
    "type": "Local",
    "path": "alloc::collections::vec_deque::VecDeque::<T, A>::resize_with"
  },
  "span": "/home/gh-zjp-CN/.rustup/toolchains/nightly-2025-12-06-aarch64-unknown-linux-gnu/lib/rustlib/src/rust/library/alloc/src/collections/vec_deque/mod.rs:2698:5: 2706:6",
  "src": "pub fn resize_with(&mut self, new_len: usize, generator: impl FnMut() -> T) {\n        let len = self.len;\n\n        if new_len > len {\n            self.extend(repeat_with(generator).take(new_len - len))\n        } else {\n            self.truncate(new_len);\n        }\n    }",
  "mir": "fn collections::vec_deque::VecDeque::<T, A>::resize_with(_1: &mut collections::vec_deque::VecDeque<T, A>, _2: usize, _3: impl FnMut() -> T) -> () {\n    let mut _0: ();\n    let  _4: usize;\n    let mut _5: bool;\n    let mut _6: core::iter::Take<core::iter::RepeatWith<impl FnMut() -> T>>;\n    let mut _7: core::iter::RepeatWith<impl FnMut() -> T>;\n    let mut _8: impl FnMut() -> T;\n    let mut _9: usize;\n    let mut _10: (usize, bool);\n    let  _11: ();\n    let mut _12: bool;\n    debug self => _1;\n    debug new_len => _2;\n    debug generator => _3;\n    debug len => _4;\n    bb0: {\n        _12 = false;\n        _12 = true;\n        _4 = ((*_1).1: usize);\n        StorageLive(_5);\n        _5 = Gt(_2, _4);\n        switchInt(move _5) -> [0: bb6, otherwise: bb1];\n    }\n    bb1: {\n        StorageLive(_6);\n        StorageLive(_7);\n        StorageLive(_8);\n        _12 = false;\n        _8 = move _3;\n        _7 = core::iter::repeat_with::<T, impl FnMut() -> T>(move _8) -> [return: bb2, unwind unreachable];\n    }\n    bb2: {\n        StorageDead(_8);\n        StorageLive(_9);\n        _10 = CheckedSub(_2, _4);\n        assert(!move (_10.1: bool), \"attempt to compute `{} - {}`, which would overflow\", _2, _4) -> [success: bb3, unwind unreachable];\n    }\n    bb3: {\n        _9 = move (_10.0: usize);\n        _6 = <core::iter::RepeatWith<impl FnMut() -> T> as core::iter::Iterator>::take(move _7, move _9) -> [return: bb4, unwind unreachable];\n    }\n    bb4: {\n        StorageDead(_9);\n        StorageDead(_7);\n        _0 = <collections::vec_deque::VecDeque<T, A> as core::iter::Extend<T>>::extend::<core::iter::Take<core::iter::RepeatWith<impl FnMut() -> T>>>(_1, move _6) -> [return: bb5, unwind unreachable];\n    }\n    bb5: {\n        StorageDead(_6);\n        goto -> bb8;\n    }\n    bb6: {\n        _11 = collections::vec_deque::VecDeque::<T, A>::truncate(_1, _2) -> [return: bb7, unwind unreachable];\n    }\n    bb7: {\n        goto -> bb8;\n    }\n    bb8: {\n        StorageDead(_5);\n        switchInt(_12) -> [0: bb9, otherwise: bb10];\n    }\n    bb9: {\n        return;\n    }\n    bb10: {\n        drop(_3) -> [return: bb9, unwind unreachable];\n    }\n}\n",
  "doc": " Modifies the deque in-place so that `len()` is equal to `new_len`,\n either by removing excess elements from the back or by appending\n elements generated by calling `generator` to the back.\n\n # Examples\n\n ```\n use std::collections::VecDeque;\n\n let mut buf = VecDeque::new();\n buf.push_back(5);\n buf.push_back(10);\n buf.push_back(15);\n assert_eq!(buf, [5, 10, 15]);\n\n buf.resize_with(5, Default::default);\n assert_eq!(buf, [5, 10, 15, 0, 0]);\n\n buf.resize_with(2, || unreachable!());\n assert_eq!(buf, [5, 10]);\n\n let mut state = 100;\n buf.resize_with(5, || { state += 1; state });\n assert_eq!(buf, [5, 10, 101, 102, 103]);\n ```\n",
  "tags": {
    "tags": [],
    "spec": {},
    "docs": []
  }
}