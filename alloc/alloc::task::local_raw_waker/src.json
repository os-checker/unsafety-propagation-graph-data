{
  "name": "alloc::task::local_raw_waker",
  "span": "$library/alloc/src/task.rs:315:1: 315:69",
  "src": "fn local_raw_waker<W: LocalWake + 'static>(waker: Rc<W>) -> RawWaker {\n    // Increment the reference count of the Rc to clone it.\n    //\n    // Refer to the comment on raw_waker's clone_waker regarding why this is\n    // always inline.\n    #[inline(always)]\n    unsafe fn clone_waker<W: LocalWake + 'static>(waker: *const ()) -> RawWaker {\n        unsafe { Rc::increment_strong_count(waker as *const W) };\n        RawWaker::new(\n            waker,\n            &RawWakerVTable::new(clone_waker::<W>, wake::<W>, wake_by_ref::<W>, drop_waker::<W>),\n        )\n    }\n\n    // Wake by value, moving the Rc into the LocalWake::wake function\n    unsafe fn wake<W: LocalWake + 'static>(waker: *const ()) {\n        let waker = unsafe { Rc::from_raw(waker as *const W) };\n        <W as LocalWake>::wake(waker);\n    }\n\n    // Wake by reference, wrap the waker in ManuallyDrop to avoid dropping it\n    unsafe fn wake_by_ref<W: LocalWake + 'static>(waker: *const ()) {\n        let waker = unsafe { ManuallyDrop::new(Rc::from_raw(waker as *const W)) };\n        <W as LocalWake>::wake_by_ref(&waker);\n    }\n\n    // Decrement the reference count of the Rc on drop\n    unsafe fn drop_waker<W: LocalWake + 'static>(waker: *const ()) {\n        unsafe { Rc::decrement_strong_count(waker as *const W) };\n    }\n\n    RawWaker::new(\n        Rc::into_raw(waker) as *const (),\n        &RawWakerVTable::new(clone_waker::<W>, wake::<W>, wake_by_ref::<W>, drop_waker::<W>),\n    )\n}"
}