{
  "name": "sync::atomic::atomic_compare_exchange",
  "safe": false,
  "callees": {
    "fmt::Arguments::<'a>::from_str": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Create a `fmt::Arguments` object for a single static string.\n\n Formatting this `fmt::Arguments` will just produce the string as-is.\n",
      "adt": {
        "fmt::Arguments": "Constructor"
      }
    },
    "intrinsics::atomic_cxchg": {
      "safe": false,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Stores a value if the current value is the same as the `old` value.\n `T` must be an integer or pointer type.\n\n The stabilized version of this intrinsic is available on the\n [`atomic`] types via the `compare_exchange` method.\n For example, [`AtomicBool::compare_exchange`].\n",
      "adt": {}
    },
    "panicking::panic_fmt": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " The entry point for panicking with a formatted message.\n\n This is designed to reduce the amount of code required at the call\n site as much as possible (so that `panic!()` has as low an impact\n on (e.g.) the inlining of other functions as possible), by moving\n the actual formatting into this shared place.\n",
      "adt": {
        "fmt::Arguments": "ImmutableAsArgument"
      }
    }
  },
  "adts": {
    "sync::atomic::Ordering": [
      "Plain",
      "Unknown([Field(0, Ty { id: 10744, kind: RigidTy(Adt(AdtDef(DefId { id: 27668, name: \"sync::atomic::Ordering\" }), GenericArgs([]))) })])",
      "Unknown([Field(1, Ty { id: 10744, kind: RigidTy(Adt(AdtDef(DefId { id: 27668, name: \"sync::atomic::Ordering\" }), GenericArgs([]))) })])"
    ],
    "fmt::Arguments": [
      "Plain"
    ],
    "result::Result": [
      "Plain"
    ]
  },
  "path": 17170,
  "span": "/home/gh-zjp-CN/.rustup/toolchains/nightly-2025-12-06-aarch64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/sync/atomic.rs:4074:1: 4134:2",
  "src": "pub unsafe fn atomic_compare_exchange<T: Copy>(\n    dst: *mut T,\n    old: T,\n    new: T,\n    success: Ordering,\n    failure: Ordering,\n) -> Result<T, T> {\n    // SAFETY: the caller must uphold the safety contract for `atomic_compare_exchange`.\n    let (val, ok) = unsafe {\n        match (success, failure) {\n            (Relaxed, Relaxed) => {\n                intrinsics::atomic_cxchg::<T, { AO::Relaxed }, { AO::Relaxed }>(dst, old, new)\n            }\n            (Relaxed, Acquire) => {\n                intrinsics::atomic_cxchg::<T, { AO::Relaxed }, { AO::Acquire }>(dst, old, new)\n            }\n            (Relaxed, SeqCst) => {\n                intrinsics::atomic_cxchg::<T, { AO::Relaxed }, { AO::SeqCst }>(dst, old, new)\n            }\n            (Acquire, Relaxed) => {\n                intrinsics::atomic_cxchg::<T, { AO::Acquire }, { AO::Relaxed }>(dst, old, new)\n            }\n            (Acquire, Acquire) => {\n                intrinsics::atomic_cxchg::<T, { AO::Acquire }, { AO::Acquire }>(dst, old, new)\n            }\n            (Acquire, SeqCst) => {\n                intrinsics::atomic_cxchg::<T, { AO::Acquire }, { AO::SeqCst }>(dst, old, new)\n            }\n            (Release, Relaxed) => {\n                intrinsics::atomic_cxchg::<T, { AO::Release }, { AO::Relaxed }>(dst, old, new)\n            }\n            (Release, Acquire) => {\n                intrinsics::atomic_cxchg::<T, { AO::Release }, { AO::Acquire }>(dst, old, new)\n            }\n            (Release, SeqCst) => {\n                intrinsics::atomic_cxchg::<T, { AO::Release }, { AO::SeqCst }>(dst, old, new)\n            }\n            (AcqRel, Relaxed) => {\n                intrinsics::atomic_cxchg::<T, { AO::AcqRel }, { AO::Relaxed }>(dst, old, new)\n            }\n            (AcqRel, Acquire) => {\n                intrinsics::atomic_cxchg::<T, { AO::AcqRel }, { AO::Acquire }>(dst, old, new)\n            }\n            (AcqRel, SeqCst) => {\n                intrinsics::atomic_cxchg::<T, { AO::AcqRel }, { AO::SeqCst }>(dst, old, new)\n            }\n            (SeqCst, Relaxed) => {\n                intrinsics::atomic_cxchg::<T, { AO::SeqCst }, { AO::Relaxed }>(dst, old, new)\n            }\n            (SeqCst, Acquire) => {\n                intrinsics::atomic_cxchg::<T, { AO::SeqCst }, { AO::Acquire }>(dst, old, new)\n            }\n            (SeqCst, SeqCst) => {\n                intrinsics::atomic_cxchg::<T, { AO::SeqCst }, { AO::SeqCst }>(dst, old, new)\n            }\n            (_, AcqRel) => panic!(\"there is no such thing as an acquire-release failure ordering\"),\n            (_, Release) => panic!(\"there is no such thing as a release failure ordering\"),\n        }\n    };\n    if ok { Ok(val) } else { Err(val) }\n}",
  "mir": "fn sync::atomic::atomic_compare_exchange(_1: *mut T, _2: T, _3: T, _4: sync::atomic::Ordering, _5: sync::atomic::Ordering) -> result::Result<T, T> {\n    let mut _0: result::Result<T, T>;\n    let  _6: T;\n    let  _7: bool;\n    let mut _8: (T, bool);\n    let mut _9: (sync::atomic::Ordering, sync::atomic::Ordering);\n    let mut _10: isize;\n    let mut _11: isize;\n    let mut _12: isize;\n    let mut _13: isize;\n    let mut _14: isize;\n    let mut _15: isize;\n    let mut _16: isize;\n    let  _17: !;\n    let mut _18: fmt::Arguments<'_>;\n    let  _19: !;\n    let mut _20: fmt::Arguments<'_>;\n    debug dst => _1;\n    debug old => _2;\n    debug new => _3;\n    debug success => _4;\n    debug failure => _5;\n    debug val => _6;\n    debug ok => _7;\n    bb0: {\n        StorageLive(_8);\n        StorageLive(_9);\n        _9 = (_4, _5);\n        _15 = discriminant((_9.0: sync::atomic::Ordering));\n        switchInt(move _15) -> [0: bb2, 1: bb4, 2: bb3, 3: bb5, 4: bb6, otherwise: bb7];\n    }\n    bb1: {\n        _16 = discriminant((_9.1: sync::atomic::Ordering));\n        switchInt(move _16) -> [1: bb8, 3: bb9, otherwise: bb7];\n    }\n    bb2: {\n        _10 = discriminant((_9.1: sync::atomic::Ordering));\n        switchInt(move _10) -> [0: bb24, 2: bb23, 4: bb22, otherwise: bb1];\n    }\n    bb3: {\n        _11 = discriminant((_9.1: sync::atomic::Ordering));\n        switchInt(move _11) -> [0: bb21, 2: bb20, 4: bb19, otherwise: bb1];\n    }\n    bb4: {\n        _12 = discriminant((_9.1: sync::atomic::Ordering));\n        switchInt(move _12) -> [0: bb18, 2: bb17, 4: bb16, otherwise: bb1];\n    }\n    bb5: {\n        _13 = discriminant((_9.1: sync::atomic::Ordering));\n        switchInt(move _13) -> [0: bb15, 2: bb14, 4: bb13, otherwise: bb1];\n    }\n    bb6: {\n        _14 = discriminant((_9.1: sync::atomic::Ordering));\n        switchInt(move _14) -> [0: bb12, 2: bb11, 4: bb10, otherwise: bb1];\n    }\n    bb7: {\n        unreachable;\n    }\n    bb8: {\n        StorageLive(_20);\n        _20 = fmt::Arguments::<'_>::from_str(\"there is no such thing as a release failure ordering\") -> [return: bb41, unwind unreachable];\n    }\n    bb9: {\n        StorageLive(_18);\n        _18 = fmt::Arguments::<'_>::from_str(\"there is no such thing as an acquire-release failure ordering\") -> [return: bb40, unwind unreachable];\n    }\n    bb10: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::SeqCst, intrinsics::AtomicOrdering::SeqCst>(_1, _2, _3) -> [return: bb39, unwind unreachable];\n    }\n    bb11: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::SeqCst, intrinsics::AtomicOrdering::Acquire>(_1, _2, _3) -> [return: bb38, unwind unreachable];\n    }\n    bb12: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::SeqCst, intrinsics::AtomicOrdering::Relaxed>(_1, _2, _3) -> [return: bb37, unwind unreachable];\n    }\n    bb13: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::AcqRel, intrinsics::AtomicOrdering::SeqCst>(_1, _2, _3) -> [return: bb36, unwind unreachable];\n    }\n    bb14: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::AcqRel, intrinsics::AtomicOrdering::Acquire>(_1, _2, _3) -> [return: bb35, unwind unreachable];\n    }\n    bb15: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::AcqRel, intrinsics::AtomicOrdering::Relaxed>(_1, _2, _3) -> [return: bb34, unwind unreachable];\n    }\n    bb16: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::Release, intrinsics::AtomicOrdering::SeqCst>(_1, _2, _3) -> [return: bb33, unwind unreachable];\n    }\n    bb17: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::Release, intrinsics::AtomicOrdering::Acquire>(_1, _2, _3) -> [return: bb32, unwind unreachable];\n    }\n    bb18: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::Release, intrinsics::AtomicOrdering::Relaxed>(_1, _2, _3) -> [return: bb31, unwind unreachable];\n    }\n    bb19: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::Acquire, intrinsics::AtomicOrdering::SeqCst>(_1, _2, _3) -> [return: bb30, unwind unreachable];\n    }\n    bb20: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::Acquire, intrinsics::AtomicOrdering::Acquire>(_1, _2, _3) -> [return: bb29, unwind unreachable];\n    }\n    bb21: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::Acquire, intrinsics::AtomicOrdering::Relaxed>(_1, _2, _3) -> [return: bb28, unwind unreachable];\n    }\n    bb22: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::Relaxed, intrinsics::AtomicOrdering::SeqCst>(_1, _2, _3) -> [return: bb27, unwind unreachable];\n    }\n    bb23: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::Relaxed, intrinsics::AtomicOrdering::Acquire>(_1, _2, _3) -> [return: bb26, unwind unreachable];\n    }\n    bb24: {\n        _8 = intrinsics::atomic_cxchg::<T, intrinsics::AtomicOrdering::Relaxed, intrinsics::AtomicOrdering::Relaxed>(_1, _2, _3) -> [return: bb25, unwind unreachable];\n    }\n    bb25: {\n        goto -> bb42;\n    }\n    bb26: {\n        goto -> bb42;\n    }\n    bb27: {\n        goto -> bb42;\n    }\n    bb28: {\n        goto -> bb42;\n    }\n    bb29: {\n        goto -> bb42;\n    }\n    bb30: {\n        goto -> bb42;\n    }\n    bb31: {\n        goto -> bb42;\n    }\n    bb32: {\n        goto -> bb42;\n    }\n    bb33: {\n        goto -> bb42;\n    }\n    bb34: {\n        goto -> bb42;\n    }\n    bb35: {\n        goto -> bb42;\n    }\n    bb36: {\n        goto -> bb42;\n    }\n    bb37: {\n        goto -> bb42;\n    }\n    bb38: {\n        goto -> bb42;\n    }\n    bb39: {\n        goto -> bb42;\n    }\n    bb40: {\n        _17 = panicking::panic_fmt(move _18) -> unwind unreachable;\n    }\n    bb41: {\n        _19 = panicking::panic_fmt(move _20) -> unwind unreachable;\n    }\n    bb42: {\n        StorageDead(_9);\n        _6 = (_8.0: T);\n        _7 = (_8.1: bool);\n        StorageDead(_8);\n        switchInt(_7) -> [0: bb44, otherwise: bb43];\n    }\n    bb43: {\n        _0 = result::Result::Ok(_6);\n        goto -> bb45;\n    }\n    bb44: {\n        _0 = result::Result::Err(_6);\n        goto -> bb45;\n    }\n    bb45: {\n        return;\n    }\n}\n",
  "doc": " Publicly exposed for stdarch; nobody else should use this.\n",
  "tags": {
    "tags": [
      {
        "tag": {
          "typ": null,
          "name": "hidden"
        },
        "args": []
      }
    ],
    "spec": {},
    "docs": [
      "* hidden\n"
    ]
  }
}