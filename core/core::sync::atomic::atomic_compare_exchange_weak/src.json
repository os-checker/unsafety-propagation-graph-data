{
  "name": "core::sync::atomic::atomic_compare_exchange_weak",
  "span": "$library/core/src/sync/atomic.rs:4139:1: 4145:18",
  "src": "unsafe fn atomic_compare_exchange_weak<T: Copy>(\n    dst: *mut T,\n    old: T,\n    new: T,\n    success: Ordering,\n    failure: Ordering,\n) -> Result<T, T> {\n    // SAFETY: the caller must uphold the safety contract for `atomic_compare_exchange_weak`.\n    let (val, ok) = unsafe {\n        match (success, failure) {\n            (Relaxed, Relaxed) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::Relaxed }, { AO::Relaxed }>(dst, old, new)\n            }\n            (Relaxed, Acquire) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::Relaxed }, { AO::Acquire }>(dst, old, new)\n            }\n            (Relaxed, SeqCst) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::Relaxed }, { AO::SeqCst }>(dst, old, new)\n            }\n            (Acquire, Relaxed) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::Acquire }, { AO::Relaxed }>(dst, old, new)\n            }\n            (Acquire, Acquire) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::Acquire }, { AO::Acquire }>(dst, old, new)\n            }\n            (Acquire, SeqCst) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::Acquire }, { AO::SeqCst }>(dst, old, new)\n            }\n            (Release, Relaxed) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::Release }, { AO::Relaxed }>(dst, old, new)\n            }\n            (Release, Acquire) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::Release }, { AO::Acquire }>(dst, old, new)\n            }\n            (Release, SeqCst) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::Release }, { AO::SeqCst }>(dst, old, new)\n            }\n            (AcqRel, Relaxed) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::AcqRel }, { AO::Relaxed }>(dst, old, new)\n            }\n            (AcqRel, Acquire) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::AcqRel }, { AO::Acquire }>(dst, old, new)\n            }\n            (AcqRel, SeqCst) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::AcqRel }, { AO::SeqCst }>(dst, old, new)\n            }\n            (SeqCst, Relaxed) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::SeqCst }, { AO::Relaxed }>(dst, old, new)\n            }\n            (SeqCst, Acquire) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::SeqCst }, { AO::Acquire }>(dst, old, new)\n            }\n            (SeqCst, SeqCst) => {\n                intrinsics::atomic_cxchgweak::<T, { AO::SeqCst }, { AO::SeqCst }>(dst, old, new)\n            }\n            (_, AcqRel) => panic!(\"there is no such thing as an acquire-release failure ordering\"),\n            (_, Release) => panic!(\"there is no such thing as a release failure ordering\"),\n        }\n    };\n    if ok { Ok(val) } else { Err(val) }\n}"
}