{
  "name": "core::num::flt2dec::estimate_max_buf_len",
  "span": "$library/core/src/num/flt2dec/mod.rs:490:1: 490:43",
  "doc": " Returns a rather crude approximation (upper bound) for the maximum buffer size\n calculated from the given decoded exponent.\n\n The exact limit is:\n\n - when `exp < 0`, the maximum length is `ceil(log_10 (5^-exp * (2^64 - 1)))`.\n - when `exp >= 0`, the maximum length is `ceil(log_10 (2^exp * (2^64 - 1)))`.\n\n `ceil(log_10 (x^exp * (2^64 - 1)))` is less than `ceil(log_10 (2^64 - 1)) +\n ceil(exp * log_10 x)`, which is in turn less than `20 + (1 + exp * log_10 x)`.\n We use the facts that `log_10 2 < 5/16` and `log_10 5 < 12/16`, which is\n enough for our purposes.\n\n Why do we need this? `format_exact` functions will fill the entire buffer\n unless limited by the last digit restriction, but it is possible that\n the number of digits requested is ridiculously large (say, 30,000 digits).\n The vast majority of buffer will be filled with zeroes, so we don't want to\n allocate all the buffer beforehand. Consequently, for any given arguments,\n 826 bytes of buffer should be sufficient for `f64`. Compare this with\n the actual number for the worst case: 770 bytes (when `exp = -1074`).\n"
}