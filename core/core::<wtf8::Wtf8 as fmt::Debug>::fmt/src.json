{
  "name": "core::<wtf8::Wtf8 as fmt::Debug>::fmt",
  "span": "$library/core/src/wtf8.rs:145:5: 145:69",
  "src": "fn fmt(&self, formatter: &mut fmt::Formatter<'_>) -> fmt::Result {\n        fn write_str_escaped(f: &mut fmt::Formatter<'_>, s: &str) -> fmt::Result {\n            use crate::fmt::Write as _;\n            for c in s.chars().flat_map(|c| {\n                c.escape_debug_ext(EscapeDebugExtArgs {\n                    escape_grapheme_extended: true,\n                    escape_single_quote: false,\n                    escape_double_quote: true,\n                })\n            }) {\n                f.write_char(c)?\n            }\n            Ok(())\n        }\n\n        formatter.write_char('\"')?;\n        let mut pos = 0;\n        while let Some((surrogate_pos, surrogate)) = self.next_surrogate(pos) {\n            // SAFETY: next_surrogate provides an index for a range of valid UTF-8 bytes.\n            write_str_escaped(formatter, unsafe {\n                str::from_utf8_unchecked(&self.bytes[pos..surrogate_pos])\n            })?;\n            write!(formatter, \"\\\\u{{{:x}}}\", surrogate)?;\n            pos = surrogate_pos + 3;\n        }\n\n        // SAFETY: after next_surrogate returns None, the remainder is valid UTF-8.\n        write_str_escaped(formatter, unsafe { str::from_utf8_unchecked(&self.bytes[pos..]) })?;\n        formatter.write_char('\"')\n    }"
}