{
  "name": "std::sys::pal::unix::time::Timespec::sub_timespec",
  "span": "$library/std/src/sys/pal/unix/time.rs:136:5: 136:79",
  "src": "pub fn sub_timespec(&self, other: &Timespec) -> Result<Duration, Duration> {\n        // When a >= b, the difference fits in u64.\n        fn sub_ge_to_unsigned(a: i64, b: i64) -> u64 {\n            debug_assert!(a >= b);\n            a.wrapping_sub(b).cast_unsigned()\n        }\n\n        if self >= other {\n            let (secs, nsec) = if self.tv_nsec.as_inner() >= other.tv_nsec.as_inner() {\n                (\n                    sub_ge_to_unsigned(self.tv_sec, other.tv_sec),\n                    self.tv_nsec.as_inner() - other.tv_nsec.as_inner(),\n                )\n            } else {\n                // Following sequence of assertions explain why `self.tv_sec - 1` does not underflow.\n                debug_assert!(self.tv_nsec < other.tv_nsec);\n                debug_assert!(self.tv_sec > other.tv_sec);\n                debug_assert!(self.tv_sec > i64::MIN);\n                (\n                    sub_ge_to_unsigned(self.tv_sec - 1, other.tv_sec),\n                    self.tv_nsec.as_inner() + (NSEC_PER_SEC as u32) - other.tv_nsec.as_inner(),\n                )\n            };\n\n            Ok(Duration::new(secs, nsec))\n        } else {\n            match other.sub_timespec(self) {\n                Ok(d) => Err(d),\n                Err(d) => Ok(d),\n            }\n        }\n    }"
}