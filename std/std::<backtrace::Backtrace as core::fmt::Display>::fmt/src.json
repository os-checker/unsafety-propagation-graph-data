{
  "name": "std::<backtrace::Backtrace as core::fmt::Display>::fmt",
  "span": "$library/std/src/backtrace.rs:383:5: 383:63",
  "src": "fn fmt(&self, fmt: &mut fmt::Formatter<'_>) -> fmt::Result {\n        let capture = match &self.inner {\n            Inner::Unsupported => return fmt.write_str(\"unsupported backtrace\"),\n            Inner::Disabled => return fmt.write_str(\"disabled backtrace\"),\n            Inner::Captured(c) => &**c,\n        };\n\n        let full = fmt.alternate();\n        let (frames, style) = if full {\n            (&capture.frames[..], backtrace_rs::PrintFmt::Full)\n        } else {\n            (&capture.frames[capture.actual_start..], backtrace_rs::PrintFmt::Short)\n        };\n\n        // When printing paths we try to strip the cwd if it exists, otherwise\n        // we just print the path as-is. Note that we also only do this for the\n        // short format, because if it's full we presumably want to print\n        // everything.\n        let cwd = crate::env::current_dir();\n        let mut print_path = move |fmt: &mut fmt::Formatter<'_>, path: BytesOrWideString<'_>| {\n            output_filename(fmt, path, style, cwd.as_ref().ok())\n        };\n\n        let mut f = backtrace_rs::BacktraceFmt::new(fmt, style, &mut print_path);\n        f.add_context()?;\n        for frame in frames {\n            if frame.symbols.is_empty() {\n                f.frame().print_raw(frame.frame.ip(), None, None, None)?;\n            } else {\n                for symbol in frame.symbols.iter() {\n                    f.frame().print_raw_with_column(\n                        frame.frame.ip(),\n                        symbol.name.as_ref().map(|b| backtrace_rs::SymbolName::new(b)),\n                        symbol.filename.as_ref().map(|b| match b {\n                            BytesOrWide::Bytes(w) => BytesOrWideString::Bytes(w),\n                            BytesOrWide::Wide(w) => BytesOrWideString::Wide(w),\n                        }),\n                        symbol.lineno,\n                        symbol.colno,\n                    )?;\n                }\n            }\n        }\n        f.finish()?;\n        Ok(())\n    }"
}