{
  "name": "std::sys::io::kernel_copy::linux::copy_regular_files::probe_copy_file_range_support",
  "span": "$library/std/src/sys/io/kernel_copy/linux.rs:621:5: 621:45",
  "src": "fn probe_copy_file_range_support() -> u8 {\n        // In some cases, we cannot determine availability from the first\n        // `copy_file_range` call. In this case, we probe with an invalid file\n        // descriptor so that the results are easily interpretable.\n        match unsafe {\n            cvt(copy_file_range(INVALID_FD, ptr::null_mut(), INVALID_FD, ptr::null_mut(), 1, 0))\n                .map_err(|e| e.raw_os_error())\n        } {\n            Err(Some(EPERM | ENOSYS)) => UNAVAILABLE,\n            Err(Some(EBADF)) => AVAILABLE,\n            Ok(_) => panic!(\"unexpected copy_file_range probe success\"),\n            // Treat other errors as the syscall\n            // being unavailable.\n            Err(_) => UNAVAILABLE,\n        }\n    }"
}