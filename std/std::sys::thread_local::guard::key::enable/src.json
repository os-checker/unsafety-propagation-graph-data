{
  "name": "std::sys::thread_local::guard::key::enable",
  "span": "$library/std/src/sys/thread_local/guard/key.rs:9:1: 9:16",
  "src": "pub fn enable() {\n    use crate::sys::thread_local::destructors;\n\n    static DTORS: LazyKey = LazyKey::new(Some(run));\n\n    // Setting the key value to something other than NULL will result in the\n    // destructor being run at thread exit.\n    unsafe {\n        set(DTORS.force(), ptr::without_provenance_mut(1));\n    }\n\n    unsafe extern \"C\" fn run(_: *mut u8) {\n        unsafe {\n            destructors::run();\n            // On platforms with `__cxa_thread_atexit_impl`, `destructors::run`\n            // does nothing on newer systems as the TLS destructors are\n            // registered with the system. But because all of those platforms\n            // call the destructors of TLS keys after the registered ones, this\n            // function will still be run last (at the time of writing).\n            crate::rt::thread_cleanup();\n        }\n    }\n}"
}