{
  "name": "std::sys::net::connection::socket::unix::Socket::new_pair",
  "span": "$library/std/src/sys/net/connection/socket/unix.rs:111:5: 111:75",
  "src": "pub fn new_pair(fam: c_int, ty: c_int) -> io::Result<(Socket, Socket)> {\n        unsafe {\n            let mut fds = [0, 0];\n\n            cfg_select! {\n                any(\n                    target_os = \"android\",\n                    target_os = \"dragonfly\",\n                    target_os = \"freebsd\",\n                    target_os = \"illumos\",\n                    target_os = \"linux\",\n                    target_os = \"hurd\",\n                    target_os = \"netbsd\",\n                    target_os = \"openbsd\",\n                    target_os = \"cygwin\",\n                    target_os = \"nto\",\n                ) => {\n                    // Like above, set cloexec atomically\n                    cvt(libc::socketpair(fam, ty | libc::SOCK_CLOEXEC, 0, fds.as_mut_ptr()))?;\n                    Ok((Socket(FileDesc::from_raw_fd(fds[0])), Socket(FileDesc::from_raw_fd(fds[1]))))\n                }\n                _ => {\n                    cvt(libc::socketpair(fam, ty, 0, fds.as_mut_ptr()))?;\n                    let a = FileDesc::from_raw_fd(fds[0]);\n                    let b = FileDesc::from_raw_fd(fds[1]);\n                    a.set_cloexec()?;\n                    b.set_cloexec()?;\n                    Ok((Socket(a), Socket(b)))\n                }\n            }\n        }\n    }"
}