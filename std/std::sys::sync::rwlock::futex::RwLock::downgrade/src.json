{
  "name": "std::sys::sync::rwlock::futex::RwLock::downgrade",
  "span": "$library/std/src/sys/sync/rwlock/futex.rs:196:5: 196:35",
  "src": "pub unsafe fn downgrade(&self) {\n        // Removes all write bits and adds a single read bit.\n        let state = self.state.fetch_add(DOWNGRADE, Release);\n        debug_assert!(is_write_locked(state), \"RwLock must be write locked to call `downgrade`\");\n\n        if has_readers_waiting(state) {\n            // Since we had the exclusive lock, nobody else can unset this bit.\n            self.state.fetch_sub(READERS_WAITING, Relaxed);\n            futex_wake_all(&self.state);\n        }\n    }"
}