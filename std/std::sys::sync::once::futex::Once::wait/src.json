{
  "name": "std::sys::sync::once::futex::Once::wait",
  "span": "$library/std/src/sys/sync/once/futex.rs:106:5: 106:47",
  "src": "pub fn wait(&self, ignore_poisoning: bool) {\n        let mut state_and_queued = self.state_and_queued.load(Acquire);\n        loop {\n            let state = state_and_queued & STATE_MASK;\n            let queued = state_and_queued & QUEUED != 0;\n            match state {\n                COMPLETE => return,\n                POISONED if !ignore_poisoning => {\n                    // Panic to propagate the poison.\n                    panic!(\"Once instance has previously been poisoned\");\n                }\n                _ => {\n                    // Set the QUEUED bit if it has not already been set.\n                    if !queued {\n                        state_and_queued += QUEUED;\n                        if let Err(new) = self.state_and_queued.compare_exchange_weak(\n                            state,\n                            state_and_queued,\n                            Relaxed,\n                            Acquire,\n                        ) {\n                            state_and_queued = new;\n                            continue;\n                        }\n                    }\n\n                    futex_wait(&self.state_and_queued, state_and_queued, None);\n                    state_and_queued = self.state_and_queued.load(Acquire);\n                }\n            }\n        }\n    }"
}