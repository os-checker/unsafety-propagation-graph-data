{
  "name": "std::thread::current::with_current_name",
  "span": "$library/std/src/thread/current.rs:212:1: 214:34",
  "src": "pub(crate) fn with_current_name<F, R>(f: F) -> R\nwhere\n    F: FnOnce(Option<&str>) -> R,\n{\n    try_with_current(|thread| {\n        let name = if let Some(thread) = thread {\n            // If there is a current thread handle, try to use the name stored\n            // there.\n            thread.name()\n        } else if let Some(main) = main_thread::get()\n            && let Some(id) = id::get()\n            && id == main\n        {\n            // The main thread doesn't always have a thread handle, we must\n            // identify it through its ID instead. The checks are ordered so\n            // that the current ID is only loaded if it is actually needed,\n            // since loading it from TLS might need multiple expensive accesses.\n            Some(\"main\")\n        } else {\n            None\n        };\n\n        f(name)\n    })\n}"
}