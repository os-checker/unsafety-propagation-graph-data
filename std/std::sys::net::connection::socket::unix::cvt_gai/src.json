{
  "name": "std::sys::net::connection::socket::unix::cvt_gai",
  "span": "$library/std/src/sys/net/connection/socket/unix.rs:36:1: 36:45",
  "src": "pub fn cvt_gai(err: c_int) -> io::Result<()> {\n    if err == 0 {\n        return Ok(());\n    }\n\n    // We may need to trigger a glibc workaround. See on_resolver_failure() for details.\n    on_resolver_failure();\n\n    #[cfg(not(any(target_os = \"espidf\", target_os = \"nuttx\")))]\n    if err == libc::EAI_SYSTEM {\n        return Err(io::Error::last_os_error());\n    }\n\n    #[cfg(not(any(target_os = \"espidf\", target_os = \"nuttx\")))]\n    let detail = unsafe {\n        // We can't always expect a UTF-8 environment. When we don't get that luxury,\n        // it's better to give a low-quality error message than none at all.\n        CStr::from_ptr(libc::gai_strerror(err)).to_string_lossy()\n    };\n\n    #[cfg(any(target_os = \"espidf\", target_os = \"nuttx\"))]\n    let detail = \"\";\n\n    Err(io::Error::new(\n        io::ErrorKind::Uncategorized,\n        &format!(\"failed to lookup address information: {detail}\")[..],\n    ))\n}"
}