{
  "name": "sync::nonpoison::rwlock::RwLock::<T>::with_mut",
  "safe": true,
  "callees": {
    "sync::nonpoison::rwlock::RwLock::<T>::write": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Locks this `RwLock` with exclusive write access, blocking the current\n thread until it can be acquired.\n\n This function will not return while other writers or other readers\n currently have access to the lock.\n\n Returns an RAII guard which will drop the write access of this `RwLock`\n when dropped.\n\n # Panics\n\n This function might panic when called if the lock is already held by the current thread.\n\n # Examples\n\n ```\n #![feature(nonpoison_rwlock)]\n\n use std::sync::nonpoison::RwLock;\n\n let lock = RwLock::new(1);\n\n let mut n = lock.write();\n *n = 2;\n\n assert!(lock.try_read().is_err());\n ```\n",
      "adt": {
        "sync::nonpoison::rwlock::RwLock": "ImmutableAsArgument",
        "sync::nonpoison::rwlock::RwLockWriteGuard": "Constructor"
      }
    },
    "core::ops::DerefMut::deref_mut": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Mutably dereferences the value.\n",
      "adt": {}
    },
    "core::ops::FnOnce::call_once": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Performs the call operation.\n",
      "adt": {}
    }
  },
  "adts": {
    "sync::nonpoison::rwlock::RwLock": [
      "Ref"
    ],
    "sync::nonpoison::rwlock::RwLockWriteGuard": [
      "Plain",
      "MutRef"
    ]
  },
  "path": 3124,
  "span": "/home/gh-zjp-CN/.rustup/toolchains/nightly-2025-12-06-aarch64-unknown-linux-gnu/lib/rustlib/src/rust/library/std/src/sync/nonpoison/rwlock.rs:557:5: 562:6",
  "src": "pub fn with_mut<F, R>(&self, f: F) -> R\n    where\n        F: FnOnce(&mut T) -> R,\n    {\n        f(&mut self.write())\n    }",
  "mir": "fn sync::nonpoison::rwlock::RwLock::<T>::with_mut(_1: &sync::nonpoison::rwlock::RwLock<T>, _2: F) -> R {\n    let mut _0: R;\n    let mut _3: (&mut T,);\n    let mut _4: &mut T;\n    let mut _5: &mut sync::nonpoison::rwlock::RwLockWriteGuard<'_, T>;\n    let mut _6: sync::nonpoison::rwlock::RwLockWriteGuard<'_, T>;\n    debug self => _1;\n    debug f => _2;\n    bb0: {\n        StorageLive(_3);\n        StorageLive(_6);\n        _6 = sync::nonpoison::rwlock::RwLock::<T>::write(_1) -> [return: bb1, unwind unreachable];\n    }\n    bb1: {\n        _5 = &mut _6;\n        _4 = <sync::nonpoison::rwlock::RwLockWriteGuard<'_, T> as core::ops::DerefMut>::deref_mut(_5) -> [return: bb2, unwind unreachable];\n    }\n    bb2: {\n        _3 = (_4);\n        _0 = <F as core::ops::FnOnce<(&mut T,)>>::call_once(_2, move _3) -> [return: bb3, unwind unreachable];\n    }\n    bb3: {\n        drop(_6) -> [return: bb4, unwind unreachable];\n    }\n    bb4: {\n        StorageDead(_6);\n        StorageDead(_3);\n        return;\n    }\n}\n",
  "doc": " Locks this `RwLock` with exclusive write access to the underlying data by passing\n a mutable reference to the given closure.\n\n This method acquires the lock, calls the provided closure with a mutable reference\n to the data, and returns the result of the closure. The lock is released after\n the closure completes, even if it panics.\n\n # Examples\n\n ```\n #![feature(lock_value_accessors, nonpoison_rwlock)]\n\n use std::sync::nonpoison::RwLock;\n\n let rwlock = RwLock::new(2);\n\n let result = rwlock.with_mut(|data| {\n     *data += 3;\n\n     *data + 5\n });\n\n assert_eq!(*rwlock.read(), 5);\n assert_eq!(result, 10);\n ```\n",
  "tags": {
    "tags": [],
    "spec": {},
    "docs": []
  }
}