{
  "name": "collections::hash::map::HashMap::<K, V, S>::extract_if",
  "safe": true,
  "callees": {
    "hashbrown::HashMap::<K, V, S, A>::extract_if": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Drains elements which are true under the given predicate,\n and returns an iterator over the removed items.\n\n In other words, move all pairs `(k, v)` such that `f(&k, &mut v)` returns `true` out\n into another iterator.\n\n Note that `extract_if` lets you mutate every value in the filter closure, regardless of\n whether you choose to keep or remove it.\n\n If the returned `ExtractIf` is not exhausted, e.g. because it is dropped without iterating\n or the iteration short-circuits, then the remaining elements will be retained.\n Use [`retain()`] with a negated predicate if you do not need the returned iterator.\n\n Keeps the allocated memory for reuse.\n\n [`retain()`]: HashMap::retain\n\n # Examples\n\n ```\n use hashbrown::HashMap;\n\n let mut map: HashMap<i32, i32> = (0..8).map(|x| (x, x)).collect();\n\n let drained: HashMap<i32, i32> = map.extract_if(|k, _v| k % 2 == 0).collect();\n\n let mut evens = drained.keys().cloned().collect::<Vec<_>>();\n let mut odds = map.keys().cloned().collect::<Vec<_>>();\n evens.sort();\n odds.sort();\n\n assert_eq!(evens, vec![0, 2, 4, 6]);\n assert_eq!(odds, vec![1, 3, 5, 7]);\n\n let mut map: HashMap<i32, i32> = (0..8).map(|x| (x, x)).collect();\n\n {   // Iterator is dropped without being consumed.\n     let d = map.extract_if(|k, _v| k % 2 != 0);\n }\n\n // ExtractIf was not exhausted, therefore no elements were drained.\n assert_eq!(map.len(), 8);\n ```\n",
      "adt": {}
    }
  },
  "adts": {
    "hashbrown::HashMap": [
      "MutRef"
    ],
    "collections::hash::map::HashMap": [
      "DerefVariantField(VariantIdx(None)-FieldIdx(Some(0)))",
      "MutRef"
    ],
    "hashbrown::hash_map::ExtractIf": [
      "Plain"
    ],
    "collections::hash::map::ExtractIf": [
      "Plain"
    ]
  },
  "path": {
    "type": "Local",
    "path": "std::collections::hash::map::HashMap::<K, V, S>::extract_if"
  },
  "span": "/home/gh-zjp-CN/.rustup/toolchains/nightly-2025-12-06-aarch64-unknown-linux-gnu/lib/rustlib/src/rust/library/std/src/collections/hash/map.rs:691:5: 696:6",
  "src": "pub fn extract_if<F>(&mut self, pred: F) -> ExtractIf<'_, K, V, F>\n    where\n        F: FnMut(&K, &mut V) -> bool,\n    {\n        ExtractIf { base: self.base.extract_if(pred) }\n    }",
  "mir": "fn collections::hash::map::HashMap::<K, V, S>::extract_if(_1: &mut collections::hash::map::HashMap<K, V, S>, _2: F) -> collections::hash::map::ExtractIf<'_, K, V, F> {\n    let mut _0: collections::hash::map::ExtractIf<'_, K, V, F>;\n    let mut _3: hashbrown::hash_map::ExtractIf<'_, K, V, F>;\n    let mut _4: &mut hashbrown::HashMap<K, V, S>;\n    debug self => _1;\n    debug pred => _2;\n    bb0: {\n        StorageLive(_3);\n        StorageLive(_4);\n        _4 = &mut ((*_1).0: hashbrown::HashMap<K, V, S>);\n        _3 = hashbrown::HashMap::<K, V, S>::extract_if::<F>(move _4, _2) -> [return: bb1, unwind unreachable];\n    }\n    bb1: {\n        StorageDead(_4);\n        _0 = ExtractIf(move _3);\n        StorageDead(_3);\n        return;\n    }\n}\n",
  "doc": " Creates an iterator which uses a closure to determine if an element (key-value pair) should be removed.\n\n If the closure returns `true`, the element is removed from the map and\n yielded. If the closure returns `false`, or panics, the element remains\n in the map and will not be yielded.\n\n The iterator also lets you mutate the value of each element in the\n closure, regardless of whether you choose to keep or remove it.\n\n If the returned `ExtractIf` is not exhausted, e.g. because it is dropped without iterating\n or the iteration short-circuits, then the remaining elements will be retained.\n Use [`retain`] with a negated predicate if you do not need the returned iterator.\n\n [`retain`]: HashMap::retain\n\n # Examples\n\n Splitting a map into even and odd keys, reusing the original map:\n\n ```\n use std::collections::HashMap;\n\n let mut map: HashMap<i32, i32> = (0..8).map(|x| (x, x)).collect();\n let extracted: HashMap<i32, i32> = map.extract_if(|k, _v| k % 2 == 0).collect();\n\n let mut evens = extracted.keys().copied().collect::<Vec<_>>();\n let mut odds = map.keys().copied().collect::<Vec<_>>();\n evens.sort();\n odds.sort();\n\n assert_eq!(evens, vec![0, 2, 4, 6]);\n assert_eq!(odds, vec![1, 3, 5, 7]);\n ```\n",
  "tags": {
    "tags": [],
    "spec": {},
    "docs": []
  }
}