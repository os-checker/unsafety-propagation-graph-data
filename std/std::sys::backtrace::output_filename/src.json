{
  "name": "std::sys::backtrace::output_filename",
  "span": "$library/std/src/sys/backtrace.rs:187:1: 192:17",
  "src": "pub fn output_filename(\n    fmt: &mut fmt::Formatter<'_>,\n    bows: BytesOrWideString<'_>,\n    print_fmt: PrintFmt,\n    cwd: Option<&PathBuf>,\n) -> fmt::Result {\n    let file: Cow<'_, Path> = match bows {\n        #[cfg(unix)]\n        BytesOrWideString::Bytes(bytes) => {\n            use crate::os::unix::prelude::*;\n            Path::new(crate::ffi::OsStr::from_bytes(bytes)).into()\n        }\n        #[cfg(not(unix))]\n        BytesOrWideString::Bytes(bytes) => {\n            Path::new(crate::str::from_utf8(bytes).unwrap_or(\"<unknown>\")).into()\n        }\n        #[cfg(windows)]\n        BytesOrWideString::Wide(wide) => {\n            use crate::os::windows::prelude::*;\n            Cow::Owned(crate::ffi::OsString::from_wide(wide).into())\n        }\n        #[cfg(not(windows))]\n        BytesOrWideString::Wide(_wide) => Path::new(\"<unknown>\").into(),\n    };\n    if print_fmt == PrintFmt::Short && file.is_absolute() {\n        if let Some(cwd) = cwd {\n            if let Ok(stripped) = file.strip_prefix(&cwd) {\n                if let Some(s) = stripped.to_str() {\n                    return write!(fmt, \".{}{s}\", path::MAIN_SEPARATOR);\n                }\n            }\n        }\n    }\n    fmt::Display::fmt(&file.display(), fmt)\n}"
}