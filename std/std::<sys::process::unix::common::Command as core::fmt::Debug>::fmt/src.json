{
  "name": "std::<sys::process::unix::common::Command as core::fmt::Debug>::fmt",
  "span": "$library/std/src/sys/process/unix/common.rs:497:5: 497:61",
  "src": "fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n        if f.alternate() {\n            let mut debug_command = f.debug_struct(\"Command\");\n            debug_command.field(\"program\", &self.program).field(\"args\", &self.args);\n            if !self.env.is_unchanged() {\n                debug_command.field(\"env\", &self.env);\n            }\n\n            if self.cwd.is_some() {\n                debug_command.field(\"cwd\", &self.cwd);\n            }\n            if self.uid.is_some() {\n                debug_command.field(\"uid\", &self.uid);\n            }\n            if self.gid.is_some() {\n                debug_command.field(\"gid\", &self.gid);\n            }\n\n            if self.groups.is_some() {\n                debug_command.field(\"groups\", &self.groups);\n            }\n\n            if self.stdin.is_some() {\n                debug_command.field(\"stdin\", &self.stdin);\n            }\n            if self.stdout.is_some() {\n                debug_command.field(\"stdout\", &self.stdout);\n            }\n            if self.stderr.is_some() {\n                debug_command.field(\"stderr\", &self.stderr);\n            }\n            if self.pgroup.is_some() {\n                debug_command.field(\"pgroup\", &self.pgroup);\n            }\n\n            #[cfg(target_os = \"linux\")]\n            {\n                debug_command.field(\"create_pidfd\", &self.create_pidfd);\n            }\n\n            debug_command.finish()\n        } else {\n            if let Some(ref cwd) = self.cwd {\n                write!(f, \"cd {cwd:?} && \")?;\n            }\n            if self.env.does_clear() {\n                write!(f, \"env -i \")?;\n                // Altered env vars will be printed next, that should exactly work as expected.\n            } else {\n                // Removed env vars need the command to be wrapped in `env`.\n                let mut any_removed = false;\n                for (key, value_opt) in self.get_envs() {\n                    if value_opt.is_none() {\n                        if !any_removed {\n                            write!(f, \"env \")?;\n                            any_removed = true;\n                        }\n                        write!(f, \"-u {} \", key.to_string_lossy())?;\n                    }\n                }\n            }\n            // Altered env vars can just be added in front of the program.\n            for (key, value_opt) in self.get_envs() {\n                if let Some(value) = value_opt {\n                    write!(f, \"{}={value:?} \", key.to_string_lossy())?;\n                }\n            }\n\n            if *self.program != self.args[0] {\n                write!(f, \"[{:?}] \", self.program)?;\n            }\n            write!(f, \"{:?}\", &self.args[0])?;\n\n            for arg in self.get_args() {\n                write!(f, \" {:?}\", arg)?;\n            }\n\n            Ok(())\n        }\n    }"
}