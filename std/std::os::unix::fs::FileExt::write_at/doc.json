{
  "name": "std::os::unix::fs::FileExt::write_at",
  "span": "$library/std/src/os/unix/fs.rs:281:5: 281:70",
  "doc": " Writes a number of bytes starting from a given offset.\n\n Returns the number of bytes written.\n\n The offset is relative to the start of the file and thus independent\n from the current cursor.\n\n The current file cursor is not affected by this function.\n\n When writing beyond the end of the file, the file is appropriately\n extended and the intermediate bytes are initialized with the value 0.\n\n Note that similar to [`File::write`], it is not an error to return a\n short write.\n\n # Bug\n On some systems, `write_at` utilises [`pwrite64`] to write to files.\n However, this syscall has a [bug] where files opened with the `O_APPEND`\n flag fail to respect the offset parameter, always appending to the end\n of the file instead.\n\n It is possible to inadvertently set this flag, like in the example below.\n Therefore, it is important to be vigilant while changing options to mitigate\n unexpected behavior.\n\n ```no_run\n use std::fs::File;\n use std::io;\n use std::os::unix::prelude::FileExt;\n\n fn main() -> io::Result<()> {\n     // Open a file with the append option (sets the `O_APPEND` flag)\n     let file = File::options().append(true).open(\"foo.txt\")?;\n\n     // We attempt to write at offset 10; instead appended to EOF\n     file.write_at(b\"sushi\", 10)?;\n\n     // foo.txt is 5 bytes long instead of 15\n     Ok(())\n }\n ```\n\n [`File::write`]: fs::File::write\n [`pwrite64`]: https://man7.org/linux/man-pages/man2/pwrite.2.html\n [bug]: https://man7.org/linux/man-pages/man2/pwrite.2.html#BUGS\n\n # Examples\n\n ```no_run\n use std::fs::File;\n use std::io;\n use std::os::unix::prelude::FileExt;\n\n fn main() -> io::Result<()> {\n     let file = File::create(\"foo.txt\")?;\n\n     // We now write at the offset 10.\n     file.write_at(b\"sushi\", 10)?;\n     Ok(())\n }\n ```\n"
}