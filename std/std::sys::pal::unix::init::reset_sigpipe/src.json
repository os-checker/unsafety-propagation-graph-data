{
  "name": "std::sys::pal::unix::init::reset_sigpipe",
  "span": "$library/std/src/sys/pal/unix/mod.rs:148:5: 148:68",
  "src": "unsafe fn reset_sigpipe(#[allow(unused_variables)] sigpipe: u8) {\n        #[cfg(not(any(\n            target_os = \"emscripten\",\n            target_os = \"fuchsia\",\n            target_os = \"horizon\",\n            target_os = \"vxworks\",\n            target_os = \"vita\",\n            // Unikraft's `signal` implementation is currently broken:\n            // https://github.com/unikraft/lib-musl/issues/57\n            target_vendor = \"unikraft\",\n        )))]\n        {\n            // We don't want to add this as a public type to std, nor do we\n            // want to `include!` a file from the compiler (which would break\n            // Miri and xargo for example), so we choose to duplicate these\n            // constants from `compiler/rustc_session/src/config/sigpipe.rs`.\n            // See the other file for docs. NOTE: Make sure to keep them in\n            // sync!\n            mod sigpipe {\n                pub const DEFAULT: u8 = 0;\n                pub const INHERIT: u8 = 1;\n                pub const SIG_IGN: u8 = 2;\n                pub const SIG_DFL: u8 = 3;\n            }\n\n            let (sigpipe_attr_specified, handler) = match sigpipe {\n                sigpipe::DEFAULT => (false, Some(libc::SIG_IGN)),\n                sigpipe::INHERIT => (true, None),\n                sigpipe::SIG_IGN => (true, Some(libc::SIG_IGN)),\n                sigpipe::SIG_DFL => (true, Some(libc::SIG_DFL)),\n                _ => unreachable!(),\n            };\n            if sigpipe_attr_specified {\n                ON_BROKEN_PIPE_FLAG_USED.store(true, crate::sync::atomic::Ordering::Relaxed);\n            }\n            if let Some(handler) = handler {\n                rtassert!(signal(libc::SIGPIPE, handler) != libc::SIG_ERR);\n                #[cfg(target_os = \"hurd\")]\n                {\n                    rtassert!(signal(libc::SIGLOST, handler) != libc::SIG_ERR);\n                }\n            }\n        }\n    }"
}