{
  "name": "<task::scheduler::fifo_scheduler::FifoScheduler<T> as task::scheduler::Scheduler<T>>::mut_local_rq_with",
  "safe": true,
  "callees": {
    "task::preempt::guard::disable_preempt": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Disables preemption.\n",
      "adt": {
        "task::preempt::guard::DisabledPreemptGuard": "Constructor"
      }
    },
    "cpu::id::current::PinCurrentCpu::current_cpu": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Returns the ID of the current CPU.\n",
      "adt": {
        "cpu::id::CpuId": "Constructor"
      }
    },
    "util::id_set::Id::as_usize": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Returns an [`usize`] from the [`Id`]'s corresponding [`u32`].\n",
      "adt": {}
    },
    "core::ops::Index::index": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Performs the indexing (`container[index]`) operation.\n\n # Panics\n\n May panic if the index is out of bounds.\n",
      "adt": {}
    },
    "sync::spin::SpinLock::<T>::disable_irq": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Converts the guard behavior from disabling preemption to disabling IRQs.\n",
      "adt": {
        "sync::spin::SpinLock": "MutableAsArgument"
      }
    },
    "sync::spin::SpinLock::<T, G>::lock": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Acquires the spin lock.\n",
      "adt": {
        "sync::spin::SpinLock": "ImmutableAsArgument",
        "sync::spin::SpinLockGuard": "Constructor"
      }
    },
    "core::ops::DerefMut::deref_mut": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Mutably dereferences the value.\n",
      "adt": {}
    },
    "core::ops::FnMut::call_mut": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Performs the call operation.\n",
      "adt": {}
    }
  },
  "adts": {
    "task::preempt::guard::DisabledPreemptGuard": [
      "Plain",
      "Ref"
    ],
    "alloc::vec::Vec": [
      "Ref"
    ],
    "task::scheduler::fifo_scheduler::FifoScheduler": [
      "DerefVariantField(VariantIdx(None)-FieldIdx(Some(0)))",
      "Ref"
    ],
    "cpu::id::CpuId": [
      "Plain"
    ],
    "sync::spin::SpinLock": [
      "Ref"
    ],
    "sync::spin::SpinLockGuard": [
      "Plain",
      "MutRef"
    ],
    "task::scheduler::fifo_scheduler::FifoRunQueue": [
      "MutRef"
    ]
  },
  "path": 2803,
  "span": "ostd/src/task/scheduler/fifo_scheduler.rs:74:5: 80:6",
  "src": "fn mut_local_rq_with(&self, f: &mut dyn FnMut(&mut dyn LocalRunQueue<T>)) {\n        let preempt_guard = disable_preempt();\n        let local_rq: &mut FifoRunQueue<T> = &mut self.rq[preempt_guard.current_cpu().as_usize()]\n            .disable_irq()\n            .lock();\n        f(local_rq);\n    }",
  "mir": "fn <task::scheduler::fifo_scheduler::FifoScheduler<T> as task::scheduler::Scheduler<T>>::mut_local_rq_with(_1: &task::scheduler::fifo_scheduler::FifoScheduler<T>, _2: &mut dyn for<'a> core::ops::FnMut(&'a mut (dyn task::scheduler::LocalRunQueue<T> + 'a))) -> () {\n    let mut _0: ();\n    let  _3: task::preempt::guard::DisabledPreemptGuard;\n    let mut _4: &mut task::scheduler::fifo_scheduler::FifoRunQueue<T>;\n    let mut _5: &mut sync::spin::SpinLockGuard<'_, task::scheduler::fifo_scheduler::FifoRunQueue<T>, sync::guard::LocalIrqDisabled>;\n    let mut _6: sync::spin::SpinLockGuard<'_, task::scheduler::fifo_scheduler::FifoRunQueue<T>, sync::guard::LocalIrqDisabled>;\n    let  _7: &sync::spin::SpinLock<task::scheduler::fifo_scheduler::FifoRunQueue<T>, sync::guard::LocalIrqDisabled>;\n    let  _8: &sync::spin::SpinLock<task::scheduler::fifo_scheduler::FifoRunQueue<T>>;\n    let mut _9: &alloc::vec::Vec<sync::spin::SpinLock<task::scheduler::fifo_scheduler::FifoRunQueue<T>>>;\n    let mut _10: usize;\n    let mut _11: cpu::id::CpuId;\n    let mut _12: &task::preempt::guard::DisabledPreemptGuard;\n    let  _13: ();\n    let mut _14: (&mut dyn task::scheduler::LocalRunQueue<T>,);\n    let mut _15: &mut dyn task::scheduler::LocalRunQueue<T>;\n    debug self => _1;\n    debug f => _2;\n    debug preempt_guard => task::preempt::guard::DisabledPreemptGuard {{ _private: () }};\n    debug local_rq => _4;\n    bb0: {\n        _3 = task::preempt::guard::disable_preempt() -> [return: bb1, unwind unreachable];\n    }\n    bb1: {\n        StorageLive(_6);\n        StorageLive(_9);\n        _9 = &((*_1).0: alloc::vec::Vec<sync::spin::SpinLock<task::scheduler::fifo_scheduler::FifoRunQueue<T>>>);\n        StorageLive(_10);\n        StorageLive(_11);\n        StorageLive(_12);\n        _12 = &_3;\n        _11 = <task::preempt::guard::DisabledPreemptGuard as cpu::id::current::PinCurrentCpu>::current_cpu(move _12) -> [return: bb2, unwind unreachable];\n    }\n    bb2: {\n        StorageDead(_12);\n        _10 = <cpu::id::CpuId as util::id_set::Id>::as_usize(move _11) -> [return: bb3, unwind unreachable];\n    }\n    bb3: {\n        StorageDead(_11);\n        _8 = <alloc::vec::Vec<sync::spin::SpinLock<task::scheduler::fifo_scheduler::FifoRunQueue<T>>> as core::ops::Index<usize>>::index(move _9, move _10) -> [return: bb4, unwind unreachable];\n    }\n    bb4: {\n        StorageDead(_10);\n        StorageDead(_9);\n        _7 = sync::spin::SpinLock::<task::scheduler::fifo_scheduler::FifoRunQueue<T>>::disable_irq(_8) -> [return: bb5, unwind unreachable];\n    }\n    bb5: {\n        _6 = sync::spin::SpinLock::<task::scheduler::fifo_scheduler::FifoRunQueue<T>, sync::guard::LocalIrqDisabled>::lock(_7) -> [return: bb6, unwind unreachable];\n    }\n    bb6: {\n        _5 = &mut _6;\n        _4 = <sync::spin::SpinLockGuard<'_, task::scheduler::fifo_scheduler::FifoRunQueue<T>, sync::guard::LocalIrqDisabled> as core::ops::DerefMut>::deref_mut(_5) -> [return: bb7, unwind unreachable];\n    }\n    bb7: {\n        StorageLive(_14);\n        StorageLive(_15);\n        _15 = _4 as &mut dyn task::scheduler::LocalRunQueue<T>;\n        _14 = (move _15);\n        _13 = <dyn for<'a> core::ops::FnMut(&'a mut (dyn task::scheduler::LocalRunQueue<T> + 'a)) as core::ops::FnMut<(&mut dyn task::scheduler::LocalRunQueue<T>,)>>::call_mut(_2, move _14) -> [return: bb8, unwind unreachable];\n    }\n    bb8: {\n        StorageDead(_15);\n        StorageDead(_14);\n        drop(_6) -> [return: bb9, unwind unreachable];\n    }\n    bb9: {\n        StorageDead(_6);\n        drop(_3) -> [return: bb10, unwind unreachable];\n    }\n    bb10: {\n        return;\n    }\n}\n",
  "doc": "",
  "tags": {
    "tags": [],
    "spec": {},
    "docs": []
  }
}