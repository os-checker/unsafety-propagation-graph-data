{
  "name": "io::io_mem::allocator::IoMemAllocatorBuilder::remove",
  "safe": true,
  "callees": {
    "core::ops::Deref::deref": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Dereferences the value.\n",
      "adt": {}
    },
    "core::fmt::Arguments::<'a>::new": {
      "safe": false,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": "",
      "adt": {}
    },
    "core::panicking::panic_fmt": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " The entry point for panicking with a formatted message.\n\n This is designed to reduce the amount of code required at the call\n site as much as possible (so that `panic!()` has as low an impact\n on (e.g.) the inlining of other functions as possible), by moving\n the actual formatting into this shared place.\n",
      "adt": {}
    },
    "io::io_mem::allocator::find_allocator": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": "",
      "adt": {
        "core::ops::Range": "ImmutableAsArgument",
        "core::option::Option": "Constructor"
      }
    },
    "util::range_alloc::RangeAllocator::alloc_specific": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": " Allocates a specific kernel virtual area.\n",
      "adt": {
        "core::ops::Range": "ImmutableAsArgument",
        "util::range_alloc::RangeAllocator": "ImmutableAsArgument",
        "core::result::Result": "Constructor",
        "util::range_alloc::RangeAllocError": "Constructor"
      }
    },
    "core::fmt::rt::Argument::<'_>::new_debug": {
      "safe": true,
      "tags": {
        "tags": [],
        "spec": {},
        "docs": []
      },
      "doc": "",
      "adt": {}
    }
  },
  "adts": {
    "alloc::vec::Vec": [
      "Ref"
    ],
    "io::io_mem::allocator::IoMemAllocatorBuilder": [
      "DerefVariantField(VariantIdx(None)-FieldIdx(Some(0)))",
      "Ref"
    ],
    "core::fmt::rt::Argument": [
      "Plain"
    ],
    "core::fmt::Arguments": [
      "Plain"
    ],
    "core::ops::Range": [
      "Ref",
      "Plain",
      "RefVariantField(VariantIdx(None)-FieldIdx(Some(0)))",
      "RefVariantField(VariantIdx(None)-FieldIdx(Some(1)))"
    ],
    "core::option::Option": [
      "Plain",
      "Unknown([Downcast(VariantIdx(1, ThreadLocalIndex)), Field(0, Ty { id: 3563, kind: RigidTy(Ref(Region { kind: ReErased }, Ty { id: 3580, kind: RigidTy(Adt(AdtDef(DefId { id: 4734, name: \"util::range_alloc::RangeAllocator\" }), GenericArgs([]))) }, Not)) })])"
    ],
    "util::range_alloc::RangeAllocator": [
      "Ref"
    ],
    "core::result::Result": [
      "Plain"
    ],
    "util::range_alloc::RangeAllocError": [
      "Ref",
      "Plain",
      "RefVariantField(VariantIdx(None)-FieldIdx(Some(0)))",
      "RefVariantField(VariantIdx(None)-FieldIdx(Some(1)))"
    ]
  },
  "path": 1748,
  "span": "ostd/src/io/io_mem/allocator.rs:131:5: 145:6",
  "src": "pub(crate) fn remove(&self, range: Range<usize>) {\n        let Some(allocator) = find_allocator(&self.allocators, &range) else {\n            panic!(\n                \"Allocator for the system device's MMIO was not found. Range: {:x?}\",\n                range\n            );\n        };\n\n        if let Err(err) = allocator.alloc_specific(&range) {\n            panic!(\n                \"An error occurred while trying to remove access to the system device's MMIO. Range: {:x?}. Error: {:?}\",\n                range, err\n            );\n        }\n    }",
  "mir": "fn io::io_mem::allocator::IoMemAllocatorBuilder::remove(_1: &io::io_mem::allocator::IoMemAllocatorBuilder, _2: core::ops::Range<usize>) -> () {\n    let mut _0: ();\n    let  _3: !;\n    let mut _4: core::fmt::Arguments<'_>;\n    let  _5: (&core::ops::Range<usize>,);\n    let mut _6: &core::ops::Range<usize>;\n    let  _7: [core::fmt::rt::Argument<'_>; 1];\n    let mut _8: core::fmt::rt::Argument<'_>;\n    let mut _9: &[u8; 68];\n    let  _10: &[core::fmt::rt::Argument<'_>; 1];\n    let  _11: &util::range_alloc::RangeAllocator;\n    let mut _12: core::option::Option<&util::range_alloc::RangeAllocator>;\n    let  _13: &[util::range_alloc::RangeAllocator];\n    let  _14: &alloc::vec::Vec<util::range_alloc::RangeAllocator>;\n    let  _15: &core::ops::Range<usize>;\n    let mut _16: isize;\n    let mut _17: core::result::Result<(), util::range_alloc::RangeAllocError>;\n    let  _18: &core::ops::Range<usize>;\n    let mut _19: isize;\n    let  _20: util::range_alloc::RangeAllocError;\n    let  _21: !;\n    let mut _22: core::fmt::Arguments<'_>;\n    let  _23: (&core::ops::Range<usize>, &util::range_alloc::RangeAllocError);\n    let mut _24: &core::ops::Range<usize>;\n    let mut _25: &util::range_alloc::RangeAllocError;\n    let  _26: [core::fmt::rt::Argument<'_>; 2];\n    let mut _27: core::fmt::rt::Argument<'_>;\n    let mut _28: core::fmt::rt::Argument<'_>;\n    let mut _29: &[u8; 102];\n    let  _30: &[core::fmt::rt::Argument<'_>; 2];\n    let mut _31: &core::ops::Range<usize>;\n    let mut _32: &core::ops::Range<usize>;\n    let mut _33: &util::range_alloc::RangeAllocError;\n    debug self => _1;\n    debug range => _2;\n    debug args => _5;\n    debug args => _7;\n    debug allocator => _11;\n    debug err => util::range_alloc::RangeAllocError;\n    debug args => _23;\n    debug args => _26;\n    bb0: {\n        StorageLive(_12);\n        _14 = &((*_1).0: alloc::vec::Vec<util::range_alloc::RangeAllocator>);\n        _13 = <alloc::vec::Vec<util::range_alloc::RangeAllocator> as core::ops::Deref>::deref(_14) -> [return: bb3, unwind unreachable];\n    }\n    bb1: {\n        _7 = [move _8];\n        StorageDead(_8);\n        StorageLive(_9);\n        _9 = b\"=Allocator for the system device\\'s MMIO was not found. Range: \\xc1 \\x00\\x00b\\x00\";\n        _10 = &_7;\n        _4 = core::fmt::Arguments::<'_>::new::<68, 1>(move _9, _10) -> [return: bb2, unwind unreachable];\n    }\n    bb2: {\n        StorageDead(_9);\n        _3 = core::panicking::panic_fmt(move _4) -> unwind unreachable;\n    }\n    bb3: {\n        _15 = &_2;\n        _12 = io::io_mem::allocator::find_allocator(_13, _15) -> [return: bb4, unwind unreachable];\n    }\n    bb4: {\n        _16 = discriminant(_12);\n        switchInt(move _16) -> [1: bb5, 0: bb6, otherwise: bb13];\n    }\n    bb5: {\n        _11 = ((_12 as variant#1).0: &util::range_alloc::RangeAllocator);\n        StorageDead(_12);\n        StorageLive(_17);\n        _18 = &_2;\n        _17 = util::range_alloc::RangeAllocator::alloc_specific(_11, _18) -> [return: bb7, unwind unreachable];\n    }\n    bb6: {\n        StorageDead(_12);\n        StorageLive(_4);\n        StorageLive(_5);\n        StorageLive(_6);\n        _6 = &_2;\n        _5 = (move _6);\n        StorageDead(_6);\n        StorageLive(_7);\n        StorageLive(_8);\n        _31 = (_5.0: &core::ops::Range<usize>);\n        _8 = core::fmt::rt::Argument::<'_>::new_debug::<core::ops::Range<usize>>(_31) -> [return: bb1, unwind unreachable];\n    }\n    bb7: {\n        _19 = discriminant(_17);\n        switchInt(move _19) -> [1: bb8, 0: bb12, otherwise: bb13];\n    }\n    bb8: {\n        StorageLive(_22);\n        StorageLive(_23);\n        StorageLive(_24);\n        _24 = &_2;\n        StorageLive(_25);\n        _25 = &_20;\n        _23 = (move _24, move _25);\n        StorageDead(_25);\n        StorageDead(_24);\n        StorageLive(_26);\n        StorageLive(_27);\n        _32 = (_23.0: &core::ops::Range<usize>);\n        _27 = core::fmt::rt::Argument::<'_>::new_debug::<core::ops::Range<usize>>(_32) -> [return: bb9, unwind unreachable];\n    }\n    bb9: {\n        StorageLive(_28);\n        _33 = (_23.1: &util::range_alloc::RangeAllocError);\n        _28 = core::fmt::rt::Argument::<'_>::new_debug::<util::range_alloc::RangeAllocError>(_33) -> [return: bb10, unwind unreachable];\n    }\n    bb10: {\n        _26 = [move _27, move _28];\n        StorageDead(_28);\n        StorageDead(_27);\n        StorageLive(_29);\n        _29 = b\"TAn error occurred while trying to remove access to the system device\\'s MMIO. Range: \\xc1 \\x00\\x00b\\t. Error: \\xc0\\x00\";\n        _30 = &_26;\n        _22 = core::fmt::Arguments::<'_>::new::<102, 2>(move _29, _30) -> [return: bb11, unwind unreachable];\n    }\n    bb11: {\n        StorageDead(_29);\n        _21 = core::panicking::panic_fmt(move _22) -> unwind unreachable;\n    }\n    bb12: {\n        StorageDead(_17);\n        return;\n    }\n    bb13: {\n        unreachable;\n    }\n}\n",
  "doc": " Removes access to a specific memory I/O range.\n\n All drivers in OSTD must use this method to prevent peripheral drivers from accessing illegal memory I/O range.\n",
  "tags": {
    "tags": [],
    "spec": {},
    "docs": []
  }
}