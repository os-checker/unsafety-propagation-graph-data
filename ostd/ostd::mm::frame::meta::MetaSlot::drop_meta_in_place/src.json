{
  "name": "ostd::mm::frame::meta::MetaSlot::drop_meta_in_place",
  "span": "ostd/src/mm/frame/meta.rs:414:5: 414:51",
  "src": "pub(super) unsafe fn drop_meta_in_place(&self) {\n        let paddr = self.frame_paddr();\n\n        // SAFETY: We have exclusive access to the frame metadata.\n        let vtable_ptr = unsafe { &mut *self.vtable_ptr.get() };\n        // SAFETY: The frame metadata is initialized and valid.\n        let vtable_ptr = unsafe { vtable_ptr.assume_init_read() };\n\n        let meta_ptr: *mut dyn AnyFrameMeta =\n            core::ptr::from_raw_parts_mut(self.storage.get(), vtable_ptr);\n\n        // SAFETY: The implementer of the frame metadata decides that if the frame\n        // is safe to be read or not.\n        let mut reader =\n            unsafe { VmReader::from_kernel_space(paddr_to_vaddr(paddr) as *const u8, PAGE_SIZE) };\n\n        // SAFETY: `ptr` points to the metadata storage which is valid to be mutably borrowed under\n        // `vtable_ptr` because the metadata is valid, the vtable is correct, and we have the exclusive\n        // access to the frame metadata.\n        unsafe {\n            // Invoke the custom `on_drop` handler.\n            (*meta_ptr).on_drop(&mut reader);\n            // Drop the frame metadata.\n            core::ptr::drop_in_place(meta_ptr);\n        }\n    }"
}