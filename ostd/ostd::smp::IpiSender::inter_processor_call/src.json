{
  "name": "ostd::smp::IpiSender::inter_processor_call",
  "span": "ostd/src/smp.rs:56:5: 56:73",
  "src": "pub(crate) fn inter_processor_call(&self, targets: &CpuSet, f: fn()) {\n        let irq_guard = irq::disable_local();\n        let this_cpu_id = irq_guard.current_cpu();\n\n        let mut call_on_self = false;\n        for cpu_id in targets.iter() {\n            if cpu_id == this_cpu_id {\n                call_on_self = true;\n                continue;\n            }\n            CALL_QUEUES.get_on_cpu(cpu_id).lock().push_back(f);\n        }\n        for cpu_id in targets.iter() {\n            if cpu_id == this_cpu_id {\n                continue;\n            }\n            let hw_cpu_id = self.hw_cpu_ids[cpu_id.as_usize()];\n            crate::arch::irq::send_ipi(hw_cpu_id, &irq_guard as _);\n        }\n        if call_on_self {\n            // Execute the function synchronously.\n            f();\n        }\n    }"
}