{
  "name": "ostd::<arch::kernel::apic::x2apic::X2Apic as arch::kernel::apic::Apic>::send_ipi",
  "span": "ostd/src/arch/x86/kernel/apic/x2apic.rs:76:5: 76:47",
  "src": "unsafe fn send_ipi(&self, icr: super::Icr) {\n        let _guard = crate::irq::disable_local();\n\n        // SAFETY: These operations write the interrupt command to APIC and wait for results. The\n        // caller guarantees it's safe to execute this interrupt command.\n        unsafe {\n            wrmsr(IA32_X2APIC_ESR, 0);\n            wrmsr(IA32_X2APIC_ICR, icr.0);\n            loop {\n                let icr = rdmsr(IA32_X2APIC_ICR);\n                if ((icr >> 12) & 0x1) == 0 {\n                    break;\n                }\n                if rdmsr(IA32_X2APIC_ESR) > 0 {\n                    break;\n                }\n            }\n        }\n    }"
}