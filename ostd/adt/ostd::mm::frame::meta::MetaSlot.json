{
  "name": "ostd::mm::frame::meta::MetaSlot",
  "constructors": [],
  "access_self_as_arg": {
    "read": [
      "ostd::mm::frame::meta::MetaSlot::as_meta_ptr",
      "ostd::mm::frame::meta::MetaSlot::drop_last_in_place",
      "ostd::mm::frame::meta::MetaSlot::drop_meta_in_place",
      "ostd::mm::frame::meta::MetaSlot::dyn_meta_ptr",
      "ostd::mm::frame::meta::MetaSlot::frame_paddr",
      "ostd::mm::frame::meta::MetaSlot::inc_ref_count",
      "ostd::mm::frame::meta::MetaSlot::write_meta"
    ],
    "write": [
      "ostd::mm::frame::meta::MetaSlot::dyn_meta_ptr",
      "ostd::mm::frame::meta::MetaSlot::frame_paddr"
    ],
    "other": []
  },
  "access_self_as_locals": {
    "read": [
      "ostd::<mm::frame::Frame<M> as core::clone::Clone>::clone",
      "ostd::<mm::frame::Frame<M> as core::ops::Drop>::drop",
      "ostd::<mm::frame::Frame<M> as mm::mem_obj::HasPaddr>::paddr",
      "ostd::<mm::frame::unique::UniqueFrame<M> as core::convert::TryFrom<mm::frame::Frame<M>>>::try_from",
      "ostd::<mm::frame::unique::UniqueFrame<M> as core::ops::Drop>::drop",
      "ostd::<mm::frame::unique::UniqueFrame<M> as mm::mem_obj::HasPaddr>::paddr",
      "ostd::mm::frame::Frame::<M>::dyn_meta",
      "ostd::mm::frame::Frame::<M>::meta",
      "ostd::mm::frame::Frame::<M>::reference_count",
      "ostd::mm::frame::Frame::<M>::slot",
      "ostd::mm::frame::inc_frame_ref_count",
      "ostd::mm::frame::linked_list::CursorMut::<'_, M>::insert_before",
      "ostd::mm::frame::linked_list::CursorMut::<'_, M>::take_current",
      "ostd::mm::frame::linked_list::LinkedList::<M>::contains",
      "ostd::mm::frame::linked_list::LinkedList::<M>::cursor_mut_at",
      "ostd::mm::frame::meta::MetaSlot::get_from_in_use",
      "ostd::mm::frame::meta::MetaSlot::get_from_unused",
      "ostd::mm::frame::meta::get_slot",
      "ostd::mm::frame::unique::<impl core::convert::From<mm::frame::unique::UniqueFrame<M>> for mm::frame::Frame<M>>::from",
      "ostd::mm::frame::unique::UniqueFrame::<M>::dyn_meta",
      "ostd::mm::frame::unique::UniqueFrame::<M>::dyn_meta_mut",
      "ostd::mm::frame::unique::UniqueFrame::<M>::meta",
      "ostd::mm::frame::unique::UniqueFrame::<M>::meta_mut",
      "ostd::mm::frame::unique::UniqueFrame::<M>::repurpose",
      "ostd::mm::frame::unique::UniqueFrame::<M>::reset_as_unused",
      "ostd::mm::frame::unique::UniqueFrame::<M>::slot"
    ],
    "write": [
      "ostd::mm::frame::meta::MetaSlot::get_from_in_use",
      "ostd::mm::frame::meta::MetaSlot::get_from_unused"
    ],
    "other": [
      "ostd::mm::frame::meta::alloc_meta_frames"
    ]
  },
  "access_field": [
    {
      "read": [
        "ostd::mm::frame::meta::MetaSlot::as_meta_ptr",
        "ostd::mm::frame::meta::MetaSlot::drop_meta_in_place",
        "ostd::mm::frame::meta::MetaSlot::write_meta"
      ],
      "write": [],
      "other": []
    },
    {
      "read": [
        "ostd::<mm::frame::Frame<M> as core::ops::Drop>::drop",
        "ostd::<mm::frame::unique::UniqueFrame<M> as core::convert::TryFrom<mm::frame::Frame<M>>>::try_from",
        "ostd::<mm::frame::unique::UniqueFrame<M> as core::ops::Drop>::drop",
        "ostd::mm::frame::Frame::<M>::reference_count",
        "ostd::mm::frame::meta::MetaSlot::drop_last_in_place",
        "ostd::mm::frame::meta::MetaSlot::get_from_in_use",
        "ostd::mm::frame::meta::MetaSlot::get_from_unused",
        "ostd::mm::frame::meta::MetaSlot::inc_ref_count",
        "ostd::mm::frame::unique::<impl core::convert::From<mm::frame::unique::UniqueFrame<M>> for mm::frame::Frame<M>>::from",
        "ostd::mm::frame::unique::UniqueFrame::<M>::reset_as_unused"
      ],
      "write": [],
      "other": []
    },
    {
      "read": [
        "ostd::mm::frame::meta::MetaSlot::drop_meta_in_place",
        "ostd::mm::frame::meta::MetaSlot::dyn_meta_ptr",
        "ostd::mm::frame::meta::MetaSlot::write_meta"
      ],
      "write": [],
      "other": []
    },
    {
      "read": [
        "ostd::mm::frame::linked_list::CursorMut::<'_, M>::insert_before",
        "ostd::mm::frame::linked_list::CursorMut::<'_, M>::take_current",
        "ostd::mm::frame::linked_list::LinkedList::<M>::contains",
        "ostd::mm::frame::linked_list::LinkedList::<M>::cursor_mut_at"
      ],
      "write": [],
      "other": []
    }
  ],
  "span": "ostd/src/mm/frame/meta.rs:78:1: 78:34",
  "src": "pub(in crate::mm) struct MetaSlot",
  "kind": "Struct",
  "doc_adt": "",
  "variant_fields": {
    "VariantIdx(None)-FieldIdx(Some(0))": {
      "name": "storage",
      "doc": " The metadata of a frame.\n\n It is placed at the beginning of a slot because:\n  - the implementation can simply cast a `*const MetaSlot`\n    to a `*const AnyFrameMeta` for manipulation;\n  - if the metadata need special alignment, we can provide\n    at most [`FRAME_METADATA_MAX_ALIGN`] bytes of alignment;\n  - the subsequent fields can utilize the padding of the\n    reference count to save space.\n\n Don't interpret this field as an array of bytes. It is a\n placeholder for the metadata of a frame.\n"
    },
    "VariantIdx(None)-FieldIdx(Some(1))": {
      "name": "ref_count",
      "doc": " The reference count of the page.\n\n Specifically, the reference count has the following meaning:\n  - `REF_COUNT_UNUSED`: The page is not in use.\n  - `REF_COUNT_UNIQUE`: The page is owned by a [`UniqueFrame`].\n  - `0`: The page is being constructed ([`Frame::from_unused`])\n    or destructured ([`drop_last_in_place`]).\n  - `1..REF_COUNT_MAX`: The page is in use.\n  - `REF_COUNT_MAX..REF_COUNT_UNIQUE`: Illegal values to\n    prevent the reference count from overflowing. Otherwise,\n    overflowing the reference count will cause soundness issue.\n\n [`Frame::from_unused`]: super::Frame::from_unused\n [`UniqueFrame`]: super::unique::UniqueFrame\n [`drop_last_in_place`]: Self::drop_last_in_place\n"
    },
    "VariantIdx(None)-FieldIdx(Some(2))": {
      "name": "vtable_ptr",
      "doc": " The virtual table that indicates the type of the metadata.\n"
    },
    "VariantIdx(None)-FieldIdx(Some(3))": {
      "name": "in_list",
      "doc": " This is only accessed by [`crate::mm::frame::linked_list`].\n It stores 0 if the frame is not in any list, otherwise it stores the\n ID of the list.\n\n It is ugly but allows us to tell if a frame is in a specific list by\n one relaxed read. Otherwise, if we store it conditionally in `storage`\n we would have to ensure that the type is correct before the read, which\n costs a synchronization.\n"
    }
  }
}