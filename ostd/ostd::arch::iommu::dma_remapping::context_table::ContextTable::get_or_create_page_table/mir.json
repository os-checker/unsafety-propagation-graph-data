{
  "name": "ostd::arch::iommu::dma_remapping::context_table::ContextTable::get_or_create_page_table",
  "span": "ostd/src/arch/x86/iommu/dma_remapping/context_table.rs:257:5: 260:39",
  "mir": "fn ostd::arch::iommu::dma_remapping::context_table::ContextTable::get_or_create_page_table(_1: &mut arch::iommu::dma_remapping::context_table::ContextTable, _2: arch::iommu::dma_remapping::PciDeviceLocation) -> &mut mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig> {\n    let mut _0: &mut mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>;\n    let  _3: arch::iommu::dma_remapping::context_table::ContextEntry;\n    let mut _4: core::result::Result<arch::iommu::dma_remapping::context_table::ContextEntry, error::Error>;\n    let mut _5: &mm::frame::Frame<()>;\n    let mut _6: usize;\n    let mut _7: usize;\n    let mut _8: usize;\n    let mut _9: usize;\n    let mut _10: u8;\n    let mut _11: (usize, bool);\n    let mut _12: usize;\n    let mut _13: u8;\n    let mut _14: (usize, bool);\n    let mut _15: usize;\n    let mut _16: (usize, bool);\n    let mut _17: &mut mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>;\n    let mut _18: bool;\n    let mut _19: &arch::iommu::dma_remapping::context_table::ContextEntry;\n    let  _20: mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>;\n    let  _21: usize;\n    let mut _22: &mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>;\n    let  _23: core::option::Option<mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>>;\n    let mut _24: &mut alloc::collections::BTreeMap<usize, mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>>;\n    let  _25: arch::iommu::dma_remapping::context_table::ContextEntry;\n    let mut _26: u128;\n    let mut _27: u128;\n    let mut _28: u128;\n    let  _29: ();\n    let mut _30: core::result::Result<(), error::Error>;\n    let mut _31: &mm::frame::Frame<()>;\n    let mut _32: usize;\n    let mut _33: usize;\n    let mut _34: usize;\n    let mut _35: usize;\n    let mut _36: u8;\n    let mut _37: (usize, bool);\n    let mut _38: usize;\n    let mut _39: u8;\n    let mut _40: (usize, bool);\n    let mut _41: usize;\n    let mut _42: (usize, bool);\n    let  _43: &arch::iommu::dma_remapping::context_table::ContextEntry;\n    let mut _44: &mut mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>;\n    let mut _45: core::option::Option<&mut mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>>;\n    let mut _46: &mut alloc::collections::BTreeMap<usize, mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>>;\n    let  _47: &usize;\n    let mut _48: &mut mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>;\n    let mut _49: core::option::Option<&mut mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>>;\n    let mut _50: &mut alloc::collections::BTreeMap<usize, mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>>;\n    let  _51: &usize;\n    let  _52: usize;\n    let mut _53: u64;\n    let mut _54: &arch::iommu::dma_remapping::context_table::ContextEntry;\n    debug self => _1;\n    debug device => _2;\n    debug bus_entry => _3;\n    debug table => _20;\n    debug address => _21;\n    debug entry => _25;\n    bb0: {\n        StorageLive(_3);\n        StorageLive(_4);\n        StorageLive(_5);\n        _5 = &((*_1).0: mm::frame::Frame<()>);\n        StorageLive(_6);\n        StorageLive(_7);\n        StorageLive(_8);\n        StorageLive(_9);\n        StorageLive(_10);\n        _10 = (_2.1: u8);\n        _9 = move _10 as usize;\n        StorageDead(_10);\n        _11 = CheckedMul(_9, 8_usize);\n        assert(!move (_11.1: bool), \"attempt to compute `{} * {}`, which would overflow\", move _9, 8_usize) -> [success: bb1, unwind unreachable];\n    }\n    bb1: {\n        _8 = move (_11.0: usize);\n        StorageDead(_9);\n        StorageLive(_12);\n        StorageLive(_13);\n        _13 = (_2.2: u8);\n        _12 = move _13 as usize;\n        StorageDead(_13);\n        _14 = CheckedAdd(_8, _12);\n        assert(!move (_14.1: bool), \"attempt to compute `{} + {}`, which would overflow\", move _8, move _12) -> [success: bb2, unwind unreachable];\n    }\n    bb2: {\n        _7 = move (_14.0: usize);\n        StorageDead(_12);\n        StorageDead(_8);\n        StorageLive(_15);\n        _15 = core::mem::size_of::<arch::iommu::dma_remapping::context_table::ContextEntry>() -> [return: bb3, unwind unreachable];\n    }\n    bb3: {\n        _16 = CheckedMul(_7, _15);\n        assert(!move (_16.1: bool), \"attempt to compute `{} * {}`, which would overflow\", move _7, move _15) -> [success: bb4, unwind unreachable];\n    }\n    bb4: {\n        _6 = move (_16.0: usize);\n        StorageDead(_15);\n        StorageDead(_7);\n        _4 = <mm::frame::Frame<()> as mm::io::VmIo>::read_val::<arch::iommu::dma_remapping::context_table::ContextEntry>(move _5, move _6) -> [return: bb5, unwind unreachable];\n    }\n    bb5: {\n        StorageDead(_6);\n        StorageDead(_5);\n        _3 = core::result::Result::<arch::iommu::dma_remapping::context_table::ContextEntry, error::Error>::unwrap(move _4) -> [return: bb6, unwind unreachable];\n    }\n    bb6: {\n        StorageDead(_4);\n        StorageLive(_17);\n        StorageLive(_18);\n        StorageLive(_19);\n        _19 = &_3;\n        _18 = arch::iommu::dma_remapping::context_table::ContextEntry::is_present(move _19) -> [return: bb7, unwind unreachable];\n    }\n    bb7: {\n        switchInt(move _18) -> [0: bb9, otherwise: bb8];\n    }\n    bb8: {\n        StorageDead(_19);\n        StorageLive(_48);\n        StorageLive(_49);\n        StorageLive(_50);\n        _50 = &mut ((*_1).1: alloc::collections::BTreeMap<usize, mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>>);\n        StorageLive(_52);\n        StorageLive(_53);\n        StorageLive(_54);\n        _54 = &_3;\n        _53 = arch::iommu::dma_remapping::context_table::ContextEntry::second_stage_pointer(move _54) -> [return: bb22, unwind unreachable];\n    }\n    bb9: {\n        StorageDead(_19);\n        _20 = mm::page_table::PageTable::<arch::iommu::dma_remapping::second_stage::IommuPtConfig>::empty() -> [return: bb10, unwind unreachable];\n    }\n    bb10: {\n        StorageLive(_22);\n        _22 = &_20;\n        _21 = mm::page_table::PageTable::<arch::iommu::dma_remapping::second_stage::IommuPtConfig>::root_paddr(move _22) -> [return: bb11, unwind unreachable];\n    }\n    bb11: {\n        StorageDead(_22);\n        StorageLive(_23);\n        StorageLive(_24);\n        _24 = &mut ((*_1).1: alloc::collections::BTreeMap<usize, mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>>);\n        _23 = alloc::collections::BTreeMap::<usize, mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>>::insert(move _24, _21, _20) -> [return: bb12, unwind unreachable];\n    }\n    bb12: {\n        StorageDead(_24);\n        drop(_23) -> [return: bb13, unwind unreachable];\n    }\n    bb13: {\n        StorageDead(_23);\n        StorageLive(_25);\n        StorageLive(_26);\n        StorageLive(_27);\n        StorageLive(_28);\n        _28 = _21 as u128;\n        _27 = BitOr(move _28, 3_u128);\n        StorageDead(_28);\n        _26 = BitOr(move _27, 18446744073709551616_u128);\n        StorageDead(_27);\n        _25 = ContextEntry(move _26);\n        StorageDead(_26);\n        StorageLive(_30);\n        StorageLive(_31);\n        _31 = &((*_1).0: mm::frame::Frame<()>);\n        StorageLive(_32);\n        StorageLive(_33);\n        StorageLive(_34);\n        StorageLive(_35);\n        StorageLive(_36);\n        _36 = (_2.1: u8);\n        _35 = move _36 as usize;\n        StorageDead(_36);\n        _37 = CheckedMul(_35, 8_usize);\n        assert(!move (_37.1: bool), \"attempt to compute `{} * {}`, which would overflow\", move _35, 8_usize) -> [success: bb14, unwind unreachable];\n    }\n    bb14: {\n        _34 = move (_37.0: usize);\n        StorageDead(_35);\n        StorageLive(_38);\n        StorageLive(_39);\n        _39 = (_2.2: u8);\n        _38 = move _39 as usize;\n        StorageDead(_39);\n        _40 = CheckedAdd(_34, _38);\n        assert(!move (_40.1: bool), \"attempt to compute `{} + {}`, which would overflow\", move _34, move _38) -> [success: bb15, unwind unreachable];\n    }\n    bb15: {\n        _33 = move (_40.0: usize);\n        StorageDead(_38);\n        StorageDead(_34);\n        StorageLive(_41);\n        _41 = core::mem::size_of::<arch::iommu::dma_remapping::context_table::ContextEntry>() -> [return: bb16, unwind unreachable];\n    }\n    bb16: {\n        _42 = CheckedMul(_33, _41);\n        assert(!move (_42.1: bool), \"attempt to compute `{} * {}`, which would overflow\", move _33, move _41) -> [success: bb17, unwind unreachable];\n    }\n    bb17: {\n        _32 = move (_42.0: usize);\n        StorageDead(_41);\n        StorageDead(_33);\n        _43 = &_25;\n        _30 = <mm::frame::Frame<()> as mm::io::VmIo>::write_val::<arch::iommu::dma_remapping::context_table::ContextEntry>(move _31, move _32, _43) -> [return: bb18, unwind unreachable];\n    }\n    bb18: {\n        StorageDead(_32);\n        StorageDead(_31);\n        _29 = core::result::Result::<(), error::Error>::unwrap(move _30) -> [return: bb19, unwind unreachable];\n    }\n    bb19: {\n        StorageDead(_30);\n        StorageLive(_45);\n        StorageLive(_46);\n        _46 = &mut ((*_1).1: alloc::collections::BTreeMap<usize, mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>>);\n        _47 = &_21;\n        _45 = alloc::collections::BTreeMap::<usize, mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>>::get_mut::<usize>(move _46, _47) -> [return: bb20, unwind unreachable];\n    }\n    bb20: {\n        StorageDead(_46);\n        _44 = core::option::Option::<&mut mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>>::unwrap(move _45) -> [return: bb21, unwind unreachable];\n    }\n    bb21: {\n        StorageDead(_45);\n        StorageDead(_25);\n        _17 = _44;\n        goto -> bb25;\n    }\n    bb22: {\n        StorageDead(_54);\n        _52 = move _53 as usize;\n        StorageDead(_53);\n        _51 = &_52;\n        _49 = alloc::collections::BTreeMap::<usize, mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>>::get_mut::<usize>(move _50, _51) -> [return: bb23, unwind unreachable];\n    }\n    bb23: {\n        StorageDead(_50);\n        _48 = core::option::Option::<&mut mm::page_table::PageTable<arch::iommu::dma_remapping::second_stage::IommuPtConfig>>::unwrap(move _49) -> [return: bb24, unwind unreachable];\n    }\n    bb24: {\n        _17 = _48;\n        StorageDead(_52);\n        StorageDead(_49);\n        StorageDead(_48);\n        goto -> bb25;\n    }\n    bb25: {\n        _0 = _17;\n        StorageDead(_18);\n        StorageDead(_17);\n        StorageDead(_3);\n        return;\n    }\n}\n"
}