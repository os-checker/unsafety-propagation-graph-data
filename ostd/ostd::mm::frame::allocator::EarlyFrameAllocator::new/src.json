{
  "name": "ostd::mm::frame::allocator::EarlyFrameAllocator::new",
  "span": "ostd/src/mm/frame/allocator.rs:256:5: 256:25",
  "src": "pub fn new() -> Self {\n        let regions = &crate::boot::EARLY_INFO.get().unwrap().memory_regions;\n\n        let mut under_4g_range = 0..0;\n        let mut max_range = 0..0;\n        for region in regions.iter() {\n            if region.typ() != MemoryRegionType::Usable {\n                continue;\n            }\n            const PADDR4G: Paddr = 0x1_0000_0000;\n            if region.base() < PADDR4G {\n                let range = region.base()..region.end().min(PADDR4G);\n                if range.len() > under_4g_range.len() {\n                    under_4g_range = range;\n                }\n            }\n            if region.end() >= PADDR4G {\n                let range = region.base().max(PADDR4G)..region.end();\n                if range.len() > max_range.len() {\n                    max_range = range;\n                }\n            }\n        }\n\n        log::debug!(\n            \"Early frame allocator (below 4G) at: {:#x?}\",\n            under_4g_range\n        );\n        if !max_range.is_empty() {\n            log::debug!(\"Early frame allocator (above 4G) at: {:#x?}\", max_range);\n        }\n\n        Self {\n            under_4g_range: under_4g_range.clone(),\n            under_4g_end: under_4g_range.start,\n            max_range: max_range.clone(),\n            max_end: max_range.start,\n        }\n    }"
}