{
  "name": "ostd::arch::iommu::registers::IommuRegisters::invalidate_interrupt_cache",
  "span": "ostd/src/arch/x86/iommu/registers/mod.rs:199:5: 199:56",
  "mir": "fn ostd::arch::iommu::registers::IommuRegisters::invalidate_interrupt_cache(_1: &mut arch::iommu::registers::IommuRegisters) -> () {\n    let mut _0: ();\n    let mut _2: bool;\n    let mut _3: &arch::iommu::registers::status::GlobalStatus;\n    let  _4: arch::iommu::registers::status::GlobalStatus;\n    let mut _5: &arch::iommu::registers::IommuRegisters;\n    let  _6: ();\n    let mut _7: sync::spin::SpinLockGuard<'_, arch::iommu::invalidate::queue::Queue, sync::guard::PreemptDisabled>;\n    let  _8: &sync::spin::SpinLock<arch::iommu::invalidate::queue::Queue>;\n    let mut _9: core::option::Option<&sync::spin::SpinLock<arch::iommu::invalidate::queue::Queue>>;\n    let mut _10: &spin::once::Once<sync::spin::SpinLock<arch::iommu::invalidate::queue::Queue>>;\n    let  _11: ();\n    let mut _12: &mut arch::iommu::invalidate::queue::Queue;\n    let mut _13: &mut sync::spin::SpinLockGuard<'_, arch::iommu::invalidate::queue::Queue, sync::guard::PreemptDisabled>;\n    let mut _14: u128;\n    let mut _15: arch::iommu::invalidate::descriptor::InterruptEntryCache;\n    let  _16: ();\n    let mut _17: &mut arch::iommu::invalidate::queue::Queue;\n    let mut _18: &mut sync::spin::SpinLockGuard<'_, arch::iommu::invalidate::queue::Queue, sync::guard::PreemptDisabled>;\n    let mut _19: u128;\n    let mut _20: arch::iommu::invalidate::descriptor::InvalidationWait;\n    let  _21: usize;\n    let  _22: &arch::iommu::invalidate::queue::Queue;\n    let mut _23: &sync::spin::SpinLockGuard<'_, arch::iommu::invalidate::queue::Queue, sync::guard::PreemptDisabled>;\n    let  _24: ();\n    let mut _25: volatile::VolatilePtr<'_, u64>;\n    let mut _26: &mut volatile::VolatileRef<'_, u64>;\n    let mut _27: u64;\n    let mut _28: usize;\n    let mut _29: u32;\n    let mut _30: bool;\n    let mut _31: u32;\n    let mut _32: volatile::VolatilePtr<'_, u32, volatile::access::ReadOnly>;\n    let mut _33: &volatile::VolatileRef<'_, u32>;\n    let  _34: ();\n    let mut _35: volatile::VolatilePtr<'_, u32>;\n    let mut _36: &mut volatile::VolatileRef<'_, u32>;\n    debug self => _1;\n    debug queue => _7;\n    debug tail => _21;\n    bb0: {\n        StorageLive(_2);\n        StorageLive(_3);\n        StorageLive(_4);\n        StorageLive(_5);\n        _5 = &(*_1);\n        _4 = arch::iommu::registers::IommuRegisters::read_global_status(move _5) -> [return: bb1, unwind unreachable];\n    }\n    bb1: {\n        _3 = &_4;\n        StorageDead(_5);\n        _2 = arch::iommu::registers::status::GlobalStatus::contains(move _3, arch::iommu::registers::status::GlobalStatus::QIES) -> [return: bb2, unwind unreachable];\n    }\n    bb2: {\n        switchInt(move _2) -> [0: bb4, otherwise: bb3];\n    }\n    bb3: {\n        StorageDead(_3);\n        StorageDead(_4);\n        StorageDead(_2);\n        StorageLive(_7);\n        StorageLive(_9);\n        StorageLive(_10);\n        _10 = {alloc203: &spin::once::Once<sync::spin::SpinLock<arch::iommu::invalidate::queue::Queue>>};\n        _9 = spin::once::Once::<sync::spin::SpinLock<arch::iommu::invalidate::queue::Queue>>::get(move _10) -> [return: bb6, unwind unreachable];\n    }\n    bb4: {\n        StorageDead(_3);\n        StorageDead(_4);\n        _6 = arch::iommu::registers::IommuRegisters::global_invalidation(_1) -> [return: bb5, unwind unreachable];\n    }\n    bb5: {\n        StorageDead(_2);\n        goto -> bb28;\n    }\n    bb6: {\n        StorageDead(_10);\n        _8 = core::option::Option::<&sync::spin::SpinLock<arch::iommu::invalidate::queue::Queue>>::unwrap(move _9) -> [return: bb7, unwind unreachable];\n    }\n    bb7: {\n        StorageDead(_9);\n        _7 = sync::spin::SpinLock::<arch::iommu::invalidate::queue::Queue>::lock(_8) -> [return: bb8, unwind unreachable];\n    }\n    bb8: {\n        StorageLive(_13);\n        _13 = &mut _7;\n        _12 = <sync::spin::SpinLockGuard<'_, arch::iommu::invalidate::queue::Queue, sync::guard::PreemptDisabled> as core::ops::DerefMut>::deref_mut(move _13) -> [return: bb9, unwind unreachable];\n    }\n    bb9: {\n        StorageDead(_13);\n        StorageLive(_14);\n        StorageLive(_15);\n        _15 = arch::iommu::invalidate::descriptor::InterruptEntryCache::global_invalidation() -> [return: bb10, unwind unreachable];\n    }\n    bb10: {\n        _14 = (_15.0: u128);\n        _11 = arch::iommu::invalidate::queue::Queue::append_descriptor(_12, move _14) -> [return: bb11, unwind unreachable];\n    }\n    bb11: {\n        StorageDead(_14);\n        StorageDead(_15);\n        StorageLive(_18);\n        _18 = &mut _7;\n        _17 = <sync::spin::SpinLockGuard<'_, arch::iommu::invalidate::queue::Queue, sync::guard::PreemptDisabled> as core::ops::DerefMut>::deref_mut(move _18) -> [return: bb12, unwind unreachable];\n    }\n    bb12: {\n        StorageDead(_18);\n        StorageLive(_19);\n        StorageLive(_20);\n        _20 = arch::iommu::invalidate::descriptor::InvalidationWait::with_interrupt_flag() -> [return: bb13, unwind unreachable];\n    }\n    bb13: {\n        _19 = (_20.0: u128);\n        _16 = arch::iommu::invalidate::queue::Queue::append_descriptor(_17, move _19) -> [return: bb14, unwind unreachable];\n    }\n    bb14: {\n        StorageDead(_19);\n        StorageDead(_20);\n        StorageLive(_23);\n        _23 = &_7;\n        _22 = <sync::spin::SpinLockGuard<'_, arch::iommu::invalidate::queue::Queue, sync::guard::PreemptDisabled> as core::ops::Deref>::deref(move _23) -> [return: bb15, unwind unreachable];\n    }\n    bb15: {\n        StorageDead(_23);\n        _21 = arch::iommu::invalidate::queue::Queue::tail(_22) -> [return: bb16, unwind unreachable];\n    }\n    bb16: {\n        StorageLive(_25);\n        StorageLive(_26);\n        _26 = &mut (((*_1).8: arch::iommu::registers::invalidation::InvalidationRegisters).1: volatile::VolatileRef<'_, u64>);\n        _25 = volatile::VolatileRef::<'_, u64>::as_mut_ptr(move _26) -> [return: bb17, unwind unreachable];\n    }\n    bb17: {\n        StorageDead(_26);\n        StorageLive(_27);\n        StorageLive(_28);\n        _29 = 4_i32 as u32;\n        _30 = Lt(move _29, 64_u32);\n        assert(move _30, \"attempt to shift left by `{}`, which would overflow\", 4_i32) -> [success: bb18, unwind unreachable];\n    }\n    bb18: {\n        _28 = Shl(_21, 4_i32);\n        _27 = move _28 as u64;\n        StorageDead(_28);\n        _24 = volatile::volatile_ptr::operations::<impl volatile::VolatilePtr<'_, u64>>::write(move _25, move _27) -> [return: bb19, unwind unreachable];\n    }\n    bb19: {\n        StorageDead(_27);\n        StorageDead(_25);\n        goto -> bb20;\n    }\n    bb20: {\n        StorageLive(_31);\n        StorageLive(_32);\n        StorageLive(_33);\n        _33 = &(((*_1).8: arch::iommu::registers::invalidation::InvalidationRegisters).3: volatile::VolatileRef<'_, u32>);\n        _32 = volatile::VolatileRef::<'_, u32>::as_ptr(move _33) -> [return: bb21, unwind unreachable];\n    }\n    bb21: {\n        StorageDead(_33);\n        _31 = volatile::volatile_ptr::operations::<impl volatile::VolatilePtr<'_, u32, volatile::access::ReadOnly>>::read(move _32) -> [return: bb22, unwind unreachable];\n    }\n    bb22: {\n        StorageDead(_32);\n        switchInt(move _31) -> [0: bb23, otherwise: bb24];\n    }\n    bb23: {\n        StorageDead(_31);\n        goto -> bb20;\n    }\n    bb24: {\n        StorageDead(_31);\n        StorageLive(_35);\n        StorageLive(_36);\n        _36 = &mut (((*_1).8: arch::iommu::registers::invalidation::InvalidationRegisters).3: volatile::VolatileRef<'_, u32>);\n        _35 = volatile::VolatileRef::<'_, u32>::as_mut_ptr(move _36) -> [return: bb25, unwind unreachable];\n    }\n    bb25: {\n        StorageDead(_36);\n        _34 = volatile::volatile_ptr::operations::<impl volatile::VolatilePtr<'_, u32>>::write(move _35, 1_u32) -> [return: bb26, unwind unreachable];\n    }\n    bb26: {\n        StorageDead(_35);\n        drop(_7) -> [return: bb27, unwind unreachable];\n    }\n    bb27: {\n        StorageDead(_7);\n        goto -> bb28;\n    }\n    bb28: {\n        return;\n    }\n}\n"
}