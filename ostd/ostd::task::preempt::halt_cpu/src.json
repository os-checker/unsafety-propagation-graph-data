{
  "name": "ostd::task::preempt::halt_cpu",
  "span": "ostd/src/task/preempt/mod.rs:23:1: 23:18",
  "src": "pub fn halt_cpu() {\n    crate::task::atomic_mode::might_sleep();\n\n    let irq_guard = crate::irq::disable_local();\n\n    if cpu_local::need_preempt() {\n        drop(irq_guard);\n    } else {\n        core::mem::forget(irq_guard);\n        // IRQs were previously enabled (checked by `might_sleep`). So we can re-enable them now.\n        crate::arch::irq::enable_local_and_halt();\n    }\n\n    super::scheduler::might_preempt();\n}"
}