{
  "name": "ostd::<mm::dma::dma_stream::DmaStream<D> as mm::io_util::HasVmReaderWriter>::reader",
  "span": "ostd/src/mm/dma/dma_stream.rs:376:5: 376:64",
  "src": "fn reader(&self) -> Result<VmReader<'_, Infallible>, Error> {\n        if !D::CAN_READ_FROM_DEVICE {\n            return Err(Error::AccessDenied);\n        }\n        match &self.inner {\n            Inner::Segment(seg) | Inner::Both(_, _, seg) => Ok(seg.reader()),\n            Inner::Kva(kva, _) => {\n                // SAFETY:\n                //  - Although the memory range points to typed memory, the range is for DMA\n                //    and the access is not by linear mapping.\n                //  - The KVA is alive during the lifetime `'_`.\n                //  - Using `VmReader` and `VmWriter` is the only way to access the KVA.\n                unsafe {\n                    Ok(VmReader::from_kernel_space(\n                        kva.start() as *const u8,\n                        kva.size(),\n                    ))\n                }\n            }\n        }\n    }"
}