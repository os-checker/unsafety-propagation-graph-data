{
  "name": "ostd::arch::cpu::extension::init",
  "span": "ostd/src/arch/x86/cpu/extension.rs:13:1: 13:30",
  "src": "pub(in crate::arch) fn init() {\n    let mut global_isa_extensions = IsaExtensions::empty();\n\n    for ext_leaf in EXTENSION_TABLE.iter() {\n        let Some(CpuidResult { ebx, ecx, edx, .. }) = cpuid(ext_leaf.leaf, ext_leaf.subleaf) else {\n            continue;\n        };\n\n        for ext_data in ext_leaf.data.iter() {\n            let bits = match ext_data.reg {\n                Reg::Ebx => ebx,\n                Reg::Ecx => ecx,\n                Reg::Edx => edx,\n            };\n            if bits & (1 << ext_data.bit) != 0 {\n                global_isa_extensions |= ext_data.flag;\n            }\n        }\n    }\n\n    log::info!(\"Detected ISA extensions: {:?}\", global_isa_extensions);\n\n    GLOBAL_ISA_EXTENSIONS.call_once(|| global_isa_extensions);\n}"
}