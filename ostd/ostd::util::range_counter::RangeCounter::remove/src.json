{
  "name": "ostd::util::range_counter::RangeCounter::remove",
  "span": "ostd/src/util/range_counter.rs:71:5: 71:96",
  "src": "pub(crate) fn remove(&mut self, range: &Range<usize>) -> impl Iterator<Item = Range<usize>> {\n        assert!(range.start <= range.end);\n        let mut updated_ranges = Vec::new();\n        let mut reported_end = range.start;\n\n        for i in range.clone() {\n            let counter = self.counters.get_mut(&i).expect(\"Removing a zero counter\");\n            if *counter > 1 {\n                if reported_end < i {\n                    updated_ranges.push(reported_end..i);\n                }\n                reported_end = i + 1;\n            }\n            *counter -= 1;\n            if *counter == 0 {\n                self.counters.remove(&i);\n            }\n        }\n        if reported_end < range.end {\n            updated_ranges.push(reported_end..range.end);\n        }\n\n        updated_ranges.into_iter()\n    }"
}