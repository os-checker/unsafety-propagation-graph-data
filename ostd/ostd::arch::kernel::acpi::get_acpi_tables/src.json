{
  "name": "ostd::arch::kernel::acpi::get_acpi_tables",
  "span": "ostd/src/arch/x86/kernel/acpi/mod.rs:46:1: 46:73",
  "src": "pub(crate) fn get_acpi_tables() -> Option<AcpiTables<AcpiMemoryHandler>> {\n    let acpi_tables = match boot::EARLY_INFO.get().unwrap().acpi_arg {\n        BootloaderAcpiArg::Rsdp(addr) => unsafe {\n            AcpiTables::from_rsdp(AcpiMemoryHandler {}, addr).unwrap()\n        },\n        BootloaderAcpiArg::Rsdt(addr) => unsafe {\n            AcpiTables::from_rsdt(AcpiMemoryHandler {}, 0, addr).unwrap()\n        },\n        BootloaderAcpiArg::Xsdt(addr) => unsafe {\n            AcpiTables::from_rsdt(AcpiMemoryHandler {}, 1, addr).unwrap()\n        },\n        BootloaderAcpiArg::NotProvided => {\n            // We search by ourselves if the bootloader decides not to provide a rsdp location.\n            let rsdp = unsafe { Rsdp::search_for_on_bios(AcpiMemoryHandler {}) };\n            match rsdp {\n                Ok(map) => unsafe {\n                    AcpiTables::from_rsdp(AcpiMemoryHandler {}, map.physical_start()).unwrap()\n                },\n                Err(_) => {\n                    warn!(\"ACPI info not found!\");\n                    return None;\n                }\n            }\n        }\n    };\n\n    Some(acpi_tables)\n}"
}