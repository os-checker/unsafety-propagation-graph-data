{
  "name": "ostd::arch::iommu::dma_remapping::context_table::ContextTable::unmap",
  "span": "ostd/src/arch/x86/iommu/dma_remapping/context_table.rs:323:5: 323:98",
  "src": "fn unmap(&mut self, device: PciDeviceLocation, daddr: Daddr) -> Result<(), ContextTableError> {\n        if device.device >= 32 || device.function >= 8 {\n            return Err(ContextTableError::InvalidDeviceId);\n        }\n\n        trace!(\"Unmapping Daddr: {:x?} for device: {:x?}\", daddr, device);\n\n        let pt = self.get_or_create_page_table(device);\n        let preempt_guard = disable_preempt();\n        let mut cursor = pt\n            .cursor_mut(&preempt_guard, &(daddr..daddr + PAGE_SIZE))\n            .unwrap();\n\n        // SAFETY: This unmaps a page from the context table, which is always safe.\n        let frag = unsafe { cursor.take_next(PAGE_SIZE) };\n        debug_assert!(frag.is_some());\n\n        Ok(())\n    }"
}